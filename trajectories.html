<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Trajectories Overview | Learn Road Runner</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/LearnRoadRunner/assets/baby/baby-rr.svg">
    <link rel="manifest" href="/LearnRoadRunner/manifest.json">
    <link rel="apple-touch-icon" sizes="180x180" href="/LearnRoadRunner/assets/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/LearnRoadRunner/assets/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/LearnRoadRunner/assets/favicons/favicon-16x16.png">
    <link rel="mask-icon" href="/LearnRoadRunner/assets/favicons/safari-pinned-tab.svg" color="#1a56db">
    <link rel="shortcut icon" href="/LearnRoadRunner/assets/favicons/favicon.ico">
    <meta name="description" content="Learn the ins-and-outs of the Road Runner library">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="1a56db">
    <meta name="msapplication-TileColor" content="#1a56db">
    <meta name="msapplication-config" content="/assets/favicons/browserconfig.xml">
    <meta name="theme-color" content="#1a56db">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Learn Road Runner">
    <meta property="og:description" content="Level up your auto.
Road Runner made easy.">
    <meta property="og:image" content="https://www.learnroadrunner.com/assets/baby/baby-rr-150ppi.png">
    <meta property="twitter:card" content="summary">
    <meta property="twitter:title" content="Vue.js">
    <meta property="twitter:description" content="FTC's Road Runner library made easy">
    <meta property="twitter:image" content="https://www.learnroadrunner.com/assets/baby/baby-rr-150ppi.png">
    
    <link rel="preload" href="/LearnRoadRunner/assets/css/0.styles.65dd92f2.css" as="style"><link rel="preload" href="/LearnRoadRunner/assets/js/app.70b0e82d.js" as="script"><link rel="preload" href="/LearnRoadRunner/assets/js/3.cb25a48f.js" as="script"><link rel="preload" href="/LearnRoadRunner/assets/js/51.c9220e12.js" as="script"><link rel="preload" href="/LearnRoadRunner/assets/js/39.f0aaf84c.js" as="script"><link rel="prefetch" href="/LearnRoadRunner/assets/js/1.841b5210.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/10.c292f533.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/11.6572b6c9.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/12.fbf7d8fe.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/13.8efb3902.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/14.1ae4f896.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/15.94fcc245.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/16.7485b5d2.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/17.8a959bf0.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/18.66d7cf5b.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/19.504d287a.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/20.7b5a0c98.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/21.303fae7d.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/22.7872f33d.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/23.4d855302.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/24.c5319172.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/25.d093b2f1.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/26.97f458db.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/27.8c9b02dc.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/28.d53000bd.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/29.70ada287.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/30.ec2485bf.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/31.eaf62819.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/32.6ca4d50c.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/33.6a148470.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/34.302892f8.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/35.aaca1dc7.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/36.278adaad.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/37.fd8adb56.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/38.dc83b582.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/4.376f9cfe.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/40.42b268e2.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/41.b2e037a1.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/42.781d32ed.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/43.ce0d1bfc.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/44.a156f125.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/45.e9187642.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/46.a2052eee.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/47.8947184e.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/48.c543e155.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/49.f29e5dd6.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/5.95d94c74.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/50.c6a04834.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/52.a8914b8a.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/53.e1ef0c00.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/6.09ef5a79.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/7.ec5c5df0.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/8.b346167d.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/9.4ed43a43.js">
    <link rel="stylesheet" href="/LearnRoadRunner/assets/css/0.styles.65dd92f2.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/LearnRoadRunner/" class="home-link router-link-active"><img src="/LearnRoadRunner/assets/baby/baby-rr.svg" alt="Learn Road Runner" class="logo"> <span class="site-name can-hide">Learn Road Runner</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/NoahBres/LearnRoadRunner" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/NoahBres/LearnRoadRunner" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/LearnRoadRunner/" aria-current="page" class="sidebar-link">Migration</a></li><li><a href="/LearnRoadRunner/introduction.html" class="sidebar-link">What is Road Runner?</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/LearnRoadRunner/introduction.html#frequently-asked-questions" class="sidebar-link">Frequently Asked Questions</a></li></ul></li><li><a href="/LearnRoadRunner/before-you-start.html" class="sidebar-link">Before You Start!</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/LearnRoadRunner/before-you-start.html#terms-to-know" class="sidebar-link">Terms to Know</a></li></ul></li><li><a href="/LearnRoadRunner/installing.html" class="sidebar-link">Installing</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/LearnRoadRunner/installing.html#method-1-downloading-the-quickstart" class="sidebar-link">Method 1: Downloading the Quickstart</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/installing.html#method-2-installing-rr-on-your-project" class="sidebar-link">Method 2: Installing RR on Your Project</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/installing.html#upgrading-firmware" class="sidebar-link">Upgrading Firmware</a></li></ul></li><li><a href="/LearnRoadRunner/quickstart-overview.html" class="sidebar-link">High Level Overview</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/LearnRoadRunner/quickstart-overview.html#what-s-feedforward" class="sidebar-link">What's Feedforward?</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/quickstart-overview.html#where-is-drivevelocitypid" class="sidebar-link">Where is DriveVelocityPID?</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/quickstart-overview.html#drive-constants" class="sidebar-link">Drive Constants</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/quickstart-overview.html#dead-wheels" class="sidebar-link">Dead Wheels</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/quickstart-overview.html#localization-test" class="sidebar-link">Localization Test*</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/quickstart-overview.html#drivefeedforwardtuner" class="sidebar-link">DriveFeedforwardTuner</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/quickstart-overview.html#drivevelocitypidtuner" class="sidebar-link">DriveVelocityPIDTuner</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/quickstart-overview.html#straight-test" class="sidebar-link">Straight Test</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/quickstart-overview.html#trackwidthtuner" class="sidebar-link">TrackWidthTuner</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/quickstart-overview.html#turn-test" class="sidebar-link">Turn Test</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/quickstart-overview.html#localization-test-2" class="sidebar-link">Localization Test**</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/quickstart-overview.html#followerpidtuner" class="sidebar-link">FollowerPIDTuner</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/quickstart-overview.html#spline-test" class="sidebar-link">Spline Test</a></li></ul></li><li><a href="/LearnRoadRunner/drive-constants.html" class="sidebar-link">Drive Constants</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/LearnRoadRunner/drive-constants.html#ticks-per-rev-max-rpm" class="sidebar-link">Ticks Per Rev &amp; Max RPM</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/drive-constants.html#run-using-encoder-motor-velo-pid" class="sidebar-link">Run Using Encoder &amp; Motor Velo PID</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/drive-constants.html#wheel-radius-gear-ratio-trackwidth" class="sidebar-link">Wheel Radius/Gear Ratio/TrackWidth</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/drive-constants.html#kv-ka-kstatic" class="sidebar-link">kV/kA/kStatic</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/drive-constants.html#base-constraints" class="sidebar-link">Base Constraints</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/drive-constants.html#samplemecanumdrive-hardware-id-s" class="sidebar-link">SampleMecanumDrive - Hardware ID's</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/drive-constants.html#samplemecanumdrive-imu-velocity" class="sidebar-link">SampleMecanumDrive - IMU Velocity</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/drive-constants.html#samplemecanumdrive-motor-direction" class="sidebar-link">SampleMecanumDrive - Motor Direction</a></li></ul></li><li><a href="/LearnRoadRunner/dead-wheels.html" class="sidebar-link">Dead Wheels</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/LearnRoadRunner/dead-wheels.html#two-wheel-odometry" class="sidebar-link">Two-Wheel Odometry</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/dead-wheels.html#three-wheel-odometry" class="sidebar-link">Three-Wheel Odometry</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/dead-wheels.html#tuning-two-wheel" class="sidebar-link">Tuning - Two-Wheel</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/dead-wheels.html#tuning-three-wheel" class="sidebar-link">Tuning - Three-Wheel</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/dead-wheels.html#troubleshooting" class="sidebar-link">Troubleshooting</a></li></ul></li><li><a href="/LearnRoadRunner/feedforward-tuning.html" class="sidebar-link">Feedforward Tuning</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/LearnRoadRunner/feedforward-tuning.html#tuning" class="sidebar-link">Tuning</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/feedforward-tuning.html#troubleshooting" class="sidebar-link">Troubleshooting</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/feedforward-tuning.html#feedforward-tuning-simulator" class="sidebar-link">Feedforward Tuning Simulator</a></li></ul></li><li><a href="/LearnRoadRunner/straight-test.html" class="sidebar-link">Straight Test Tuning</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/LearnRoadRunner/straight-test.html#tuning-lateral-multiplier-dead-wheels" class="sidebar-link">Tuning Lateral Multiplier - Dead Wheels</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/straight-test.html#drive-encoder-localization" class="sidebar-link">Drive Encoder Localization</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/straight-test.html#troubleshooting" class="sidebar-link">Troubleshooting</a></li></ul></li><li><a href="/LearnRoadRunner/trackwidth-tuning.html" class="sidebar-link">Track Width Tuning</a></li><li><a href="/LearnRoadRunner/turn-test.html" class="sidebar-link">Turn Test Tuning</a></li><li><a href="/LearnRoadRunner/localization-test-2.html" class="sidebar-link">Localization Test 2*</a></li><li><a href="/LearnRoadRunner/follower-pid-tuning.html" class="sidebar-link">Follower PID Tuning</a></li><li><a href="/LearnRoadRunner/spline-test.html" class="sidebar-link">Spline Test</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/LearnRoadRunner/spline-test.html#diagnostic-tips" class="sidebar-link">Diagnostic Tips</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/spline-test.html#hiding-the-tuning-opmodes" class="sidebar-link">Hiding the tuning opmodes</a></li></ul></li><li><a href="/LearnRoadRunner/trajectories.html" aria-current="page" class="active sidebar-link">Trajectories Overview</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectories.html#trajectories-vs-paths" class="sidebar-link">Trajectories vs Paths</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectories.html#vectors-and-poses" class="sidebar-link">Vectors and Poses</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectories.html#building-a-trajectory" class="sidebar-link">Building a Trajectory</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectories.html#path-continuity-exception" class="sidebar-link">Path Continuity Exception</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectories.html#set-pose-estimate" class="sidebar-link">Set Pose Estimate</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectories.html#running-multiple-trajectories" class="sidebar-link">Running Multiple Trajectories</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectories.html#trajectories-vs-turns" class="sidebar-link">Trajectories vs Turns</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectories.html#going-backwards" class="sidebar-link">Going Backwards</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectories.html#trajectories-after-turns" class="sidebar-link">Trajectories After Turns</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectories.html#slowing-down-a-trajectory" class="sidebar-link">Slowing Down a Trajectory</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectories.html#coordinate-system" class="sidebar-link">Coordinate System</a></li></ul></li><li><a href="/LearnRoadRunner/trajectorybuilder-functions.html" class="sidebar-link">TrajectoryBuilder Function List</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectorybuilder-functions.html#forward-distance-double" class="sidebar-link">.forward(distance: Double)</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectorybuilder-functions.html#back-distance-double" class="sidebar-link">.back(distance: Double)</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectorybuilder-functions.html#strafeleft-distance-double" class="sidebar-link">.strafeLeft(distance: Double)</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectorybuilder-functions.html#straferight-distance-double" class="sidebar-link">.strafeRight(distance: Double)</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectorybuilder-functions.html#strafeto-endposition-vector2d" class="sidebar-link">.strafeTo(endPosition: Vector2d)</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectorybuilder-functions.html#lineto-endposition-vector2d" class="sidebar-link">.lineTo(endPosition: Vector2d)</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectorybuilder-functions.html#linetoconstantheading-endposition-vector2d" class="sidebar-link">.lineToConstantHeading(endPosition: Vector2d)</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectorybuilder-functions.html#linetolinearheading-endpose-pose2d" class="sidebar-link">.lineToLinearHeading(endPose: Pose2d)</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectorybuilder-functions.html#linetosplineheading-endpose-pose2d" class="sidebar-link">.lineToSplineHeading(endPose: Pose2d)</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectorybuilder-functions.html#splineto-endposition-vector2d-endtangent-double" class="sidebar-link">.splineTo(endPosition: Vector2d, endTangent: Double)</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectorybuilder-functions.html#splinetoconstantheading-endposition-vector2d-endtangent-double" class="sidebar-link">.splineToConstantHeading(endPosition: Vector2d, endTangent: Double)</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectorybuilder-functions.html#splinetolinearheading-endpose-pose2d-endtangent-double" class="sidebar-link">.splineToLinearHeading(endPose: Pose2d, endTangent: Double)</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectorybuilder-functions.html#splinetosplineheading-endpose-pose2d-endtangent-double" class="sidebar-link">.splineToSplineHeading(endPose: Pose2d, endTangent: Double)</a></li></ul></li><li><a href="/LearnRoadRunner/markers.html" class="sidebar-link">Marker Guide</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/LearnRoadRunner/markers.html#types-of-markers" class="sidebar-link">Types of Markers</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/markers.html#temporal-markers-basics" class="sidebar-link">Temporal Markers - Basics</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/markers.html#displacement-markers-basics" class="sidebar-link">Displacement Markers - Basics</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/markers.html#spatial-markers-basics" class="sidebar-link">Spatial Markers - Basics</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/markers.html#things-to-keep-in-mind" class="sidebar-link">Things to Keep In Mind</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/markers.html#advanced-marker-use" class="sidebar-link">Advanced Marker Use</a></li></ul></li><li><a href="/LearnRoadRunner/trajectory-sequence.html" class="sidebar-link">Trajectory Sequence</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectory-sequence.html#overview" class="sidebar-link">Overview</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectory-sequence.html#everything-from-the-trajectorybuilder-list" class="sidebar-link">Everything from the TrajectoryBuilder list</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectory-sequence.html#turn-radians" class="sidebar-link">.turn(radians)</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectory-sequence.html#waitseconds-seconds" class="sidebar-link">.waitSeconds(seconds)</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectory-sequence.html#addtemporalmarker-markercallback" class="sidebar-link">.addTemporalMarker(MarkerCallback)</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectory-sequence.html#unstable-addtemporalmarkeroffset-offset-markercallback" class="sidebar-link">.UNSTABLE_addTemporalMarkerOffset(offset, MarkerCallback)</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectory-sequence.html#unstable-adddisplacementmarkeroffset-offset-markercallback" class="sidebar-link">.UNSTABLE_addDisplacementMarkerOffset(offset, MarkerCallback)</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectory-sequence.html#marker-use-examples" class="sidebar-link">Marker Use Examples</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectory-sequence.html#settangent-double" class="sidebar-link">.setTangent(double)</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectory-sequence.html#setreversed-boolean" class="sidebar-link">.setReversed(boolean)</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectory-sequence.html#setconstraints-trajectoryvelocityconstraint-trajectoryaccelerationconstraint" class="sidebar-link">.setConstraints(TrajectoryVelocityConstraint, TrajectoryAccelerationConstraint)</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectory-sequence.html#resetconstraints" class="sidebar-link">.resetConstraints()</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectory-sequence.html#setvelconstraint-trajectoryvelocityconstraint" class="sidebar-link">.setVelConstraint(TrajectoryVelocityConstraint)</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectory-sequence.html#resetvelconstraint" class="sidebar-link">.resetVelConstraint()</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectory-sequence.html#setaccelconstraint-trajectoryaccelerationconstraint" class="sidebar-link">.setAccelConstraint(TrajectoryAccelerationConstraint)</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectory-sequence.html#resetaccelconstraint" class="sidebar-link">.resetAccelConstraint()</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectory-sequence.html#setturnconstraint-maxangvel-maxangaccel" class="sidebar-link">.setTurnConstraint(maxAngVel, maxAngAccel)</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectory-sequence.html#resetturnconstraint" class="sidebar-link">.resetTurnConstraint()</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectory-sequence.html#addtrajectory-trajectory" class="sidebar-link">.addTrajectory(Trajectory)</a></li></ul></li><li><a href="/LearnRoadRunner/advanced.html" class="sidebar-link">Advanced Tips</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/LearnRoadRunner/advanced.html#using-road-runner-in-teleop" class="sidebar-link">Using Road Runner in Teleop</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/advanced.html#transferring-pose-between-opmodes" class="sidebar-link">Transferring Pose Between Opmodes</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/advanced.html#async-following" class="sidebar-link">Async Following</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/advanced.html#chaining-async-trajectories" class="sidebar-link">Chaining Async Trajectories</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/advanced.html#finite-state-machine-following" class="sidebar-link">Finite State Machine Following</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/advanced.html#admissible-error-and-timeout" class="sidebar-link">Admissible Error and Timeout</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/advanced.html#_180°-turn-direction" class="sidebar-link">180° Turn Direction</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/advanced.html#gain-scheduling" class="sidebar-link">Gain Scheduling</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/advanced.html#interrupting-a-live-trajectory" class="sidebar-link">Interrupting a Live Trajectory</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/advanced.html#automatic-driving-in-teleop" class="sidebar-link">Automatic Driving in Teleop</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/advanced.html#omniwheels" class="sidebar-link">OmniWheels</a></li></ul></li><li><a href="/LearnRoadRunner/tools.html" class="sidebar-link">Tools</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/LearnRoadRunner/tools.html#meepmeep" class="sidebar-link">MeepMeep</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/tools.html#road-runner-gui" class="sidebar-link">Road Runner GUI</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/tools.html#david-s-rrpathvisualizer" class="sidebar-link">David's RRPathVisualizer</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/tools.html#rrpathgen" class="sidebar-link">RRPathGen</a></li></ul></li><li><a href="/LearnRoadRunner/resources.html" class="sidebar-link">Further Resources</a></li><li><a href="/LearnRoadRunner/drive-velocity-pid-tuning.html" class="sidebar-link">Archived</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/LearnRoadRunner/drive-velocity-pid-tuning.html#why-is-drivevelocitypid-not-used" class="sidebar-link">Why is DriveVelocityPID not used?</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/drive-velocity-pid-tuning.html#drivevelocitypid-tuning" class="sidebar-link">DriveVelocityPID tuning</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/drive-velocity-pid-tuning.html#tuning" class="sidebar-link">Tuning</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/drive-velocity-pid-tuning.html#troubleshooting" class="sidebar-link">Troubleshooting</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/drive-velocity-pid-tuning.html#pid-tuning-simulator" class="sidebar-link">PID Tuning Simulator</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="trajectories-overview"><a href="#trajectories-overview" class="header-anchor">#</a> Trajectories Overview</h1> <h2 id="trajectories-vs-paths"><a href="#trajectories-vs-paths" class="header-anchor">#</a> Trajectories vs Paths</h2> <p>Just as a clarification, Road Runner has two types of data structures for constructing your routes: paths and trajectories. Paths are what one would expect them to be.
They simply hold the entire route built by the waypoints you define. These routes can be simple straight lines or smooth splines. Trajectories are paths with motion profiling.
This means that they also map what velocity your bot should be throughout the entire route. This allows one to control the acceleration, velocity, angular acceleration, etc.
As it is right now, Road Runner does not package a path follower for holonomic drive. It does include Ramsete path following for tank drive.
The addition of a holonomic guided vector field follower will allow for path following with holonomic drives.
Check out the <a href="https://discord.gg/first-tech-challenge" target="_blank" rel="noopener noreferrer">FTC Discord<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for further details on that.
Road Runner does include PIDVA trajectory followers for both holonomic and tank drive. This is what the quickstart utilizes by default.</p> <h2 id="vectors-and-poses"><a href="#vectors-and-poses" class="header-anchor">#</a> Vectors and Poses</h2> <p>Because you will be utilizing them quite a bit, we're going to define the two Road Runner classes used to represent position.</p> <h3 id="vector2d"><a href="#vector2d" class="header-anchor">#</a> Vector2d</h3> <p>Represents a 2d vector: an X and Y coordinate.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// Create a vector at coordinate (10, -5)</span>
<span class="token class-name">Vector2d</span> myVector <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vector2d</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="pose2d"><a href="#pose2d" class="header-anchor">#</a> Pose2d</h3> <p>Represents a 2d robot pose: and X and Y coordinate, and a heading.</p> <p>Generally, this represents the robot's position and direction it faces.
Remember that increasing the angle goes counter-clockwise, just like any unit circle you've learned about in trigonometry.
Keep this in mind as the turn function will go counter-clockwise.
Also remember that any representation of an angle should be in radians. This is why we use the <code>Math.toRadians()</code> function to convert from degrees to radians.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// Create a pose at coordinate (10, -5) facing 90 degrees</span>
<span class="token class-name">Pose2d</span> myPose <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Pose2d</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">toRadians</span><span class="token punctuation">(</span><span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="building-a-trajectory"><a href="#building-a-trajectory" class="header-anchor">#</a> Building a Trajectory</h2> <p>We're going to assume you're using the road-runner-quickstart repo. If not, the gist of everything is still the same. You just have to ignore the <code>SampleMecanumDrive.java</code> helper functions.
It's quite trivial if you want to figure out how to use it without the quickstart if you choose to go your own route.</p> <p>You may have already gotten the gist of how to write your own trajectory through the tuning opmodes. Here is a basic sample:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyOpmode</span> <span class="token keyword">extends</span> <span class="token class-name">LinearOpMode</span> <span class="token punctuation">{</span>
  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">runOpMode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">SampleMecanumDrive</span> drive <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SampleMecanumDrive</span><span class="token punctuation">(</span>hardwareMap<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">Trajectory</span> myTrajectory <span class="token operator">=</span> drive<span class="token punctuation">.</span><span class="token function">trajectoryBuilder</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Pose2d</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">strafeRight</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">waitForStart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isStopRequested</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>

    drive<span class="token punctuation">.</span><span class="token function">followTrajectory</span><span class="token punctuation">(</span>myTrajectory<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Let's go through this step by step.</p> <div class="h-5"></div> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">SampleMecanumDrive</span> drive <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SampleMecanumDrive</span><span class="token punctuation">(</span>hardwareMap<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>There, we simply declare the <code>SampleMecanumDrive</code> object included in the quickstart and pass in the <code>hardwareMap</code> from the opmode.</p> <div class="h-5"></div> <div class="language-java extra-class"><div class="highlight-lines"><div class="highlighted"> </div><br><br><br><br></div><pre class="language-java"><code><span class="token class-name">Trajectory</span> myTrajectory <span class="token operator">=</span> drive<span class="token punctuation">.</span><span class="token function">trajectoryBuilder</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Pose2d</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">strafeRight</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>This is your main trajectory building interface. We create a <code>Trajectory</code> object named <code>myTrajectory</code>.
We do so by calling the <code>trajectoryBuilder()</code> function from <code>drive</code>. This just automatically passes in our constraints.</p> <p>We pass in a starting pose: <code>new Pose2d()</code>. This is the same as doing <code>new Pose2d(0, 0, 0)</code>, so creating a pose at x: 0, y: 0, and heading: 0 degrees.</p> <p>What we're saying is that we want to assume the bot starts at the center of the field facing straight (we'll discuss the coordinate system later).
If you want to set your starting position to something else, say x: 5, y: -4, at a 90 degree turn, you would replace <code>new Pose2d()</code> with <code>new Pose2d(5, -4, Math.toRadians(90))</code>.</p> <p>Notice the lack of semicolon at the end of the <code>drive.trajectoryBuilder()</code> line. That means that line doesn't actually end there. The entire line is actually the same as this:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Trajectory</span> myTrajectory <span class="token operator">=</span> drive<span class="token punctuation">.</span><span class="token function">trajectoryBuilder</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Pose2d</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">strafeRight</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>However, we prefer to enter a new line to keep everything clean.</p> <div class="h-5"></div> <div class="language-java extra-class"><div class="highlight-lines"><br><div class="highlighted"> </div><div class="highlighted"> </div><br><br></div><pre class="language-java"><code><span class="token class-name">Trajectory</span> myTrajectory <span class="token operator">=</span> drive<span class="token punctuation">.</span><span class="token function">trajectoryBuilder</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Pose2d</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">strafeRight</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Next, notice the <code>.strafeRight(10)</code> and <code>.forward(5)</code> functions. We are telling the trajectory that we want to strafe right 10 inches, then go forward 5 inches.
The <code>TrajectoryBuilder</code> object utilizes something called a <a href="https://howtodoinjava.com/design-patterns/creational/builder-pattern-in-java/" target="_blank" rel="noopener noreferrer">builder pattern<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> that allows us to <a href="https://www.geeksforgeeks.org/method-chaining-in-java-with-examples/" target="_blank" rel="noopener noreferrer">method chain<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.
This means that we can keep chaining differents methods, infinitely, to keep building up our trajectory. Check out the <a href="/trajectorybuilder-functions">TrajectoryBuilder Function List</a> for more options.</p> <div class="h-5"></div> <div class="language-java extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br></div><pre class="language-java"><code><span class="token class-name">Trajectory</span> myTrajectory <span class="token operator">=</span> drive<span class="token punctuation">.</span><span class="token function">trajectoryBuilder</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Pose2d</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">strafeRight</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Finally, take a look at the <code>build()</code> function. The <code>trajectoryBuilder()</code> function doesn't actually return a <code>Trajectory</code> object. It returns a <code>TrajectoryBuilder</code> object which allows us to do the fancy method chaining and builder pattern.
We turn that <code>TrajectoryBuilder</code> into a <code>Trajectory</code> by calling the <code>build()</code> function. This will run through everything you built, double check everything, validate the trajectory, and then return your built <code>Trajectory</code> object.</p> <div class="h-5"></div> <div class="language-java extra-class"><div class="highlight-lines"><br><br><br><br><div class="highlighted"> </div><br></div><pre class="language-java"><code><span class="token function">waitForStart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isStopRequested</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>

drive<span class="token punctuation">.</span><span class="token function">followTrajectory</span><span class="token punctuation">(</span>myTrajectory<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>We're going to ignore the the first 3 lines as those are standard FTC Opmode procedures. Notice the <code>drive.followTrajectory(myTrajectory)</code> function. Essentially, we take our trajectory and tell our bot to follow it.
Pretty self explanatory. At that point, the bot will try to follow the entire trajectory.</p> <div class="h-5"></div> <p>That's it right? Well, not quite. if you run that trajectory as-is, it's actually going to break. It'll throw a <code>PathContinuityException</code> error. Learn more about those <a href="#path-continuity-exception">below</a>.</p> <h2 id="path-continuity-exception"><a href="#path-continuity-exception" class="header-anchor">#</a> Path Continuity Exception</h2> <p>So you go to run your cool new trajectory you just made.</p> <div class="language-java extra-class"><pre class="language-java"><code>drive<span class="token punctuation">.</span><span class="token function">trajectoryBuilder</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Pose2d</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">strafeRight</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Sadly, your program crashed and you run into a <code>PathContinuityException</code> error. Why is that??</p> <p>Well, you've run into a continuity error. What does this mean? If you harken back to the old days of pre-calculus or algebra 2, you may have covered <a href="https://www.wikiwand.com/en/Classification_of_discontinuities" target="_blank" rel="noopener noreferrer">discontinuities<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. If you haven't taken either of those classes yet, you will eventually cover them.</p> <figure align="center"><div class="relative overflow-hidden rounded-lg"><img src="https://cdn.statically.io/gh/NoahBres/LearnRoadRunner/1c0fe8d5/docs/assets/trajectory-overview/wikipedia-removable-discontinuity-quarter.png" alt="Image depicting a removable discontinuity"> <div class="absolute top-0 left-0 w-full h-full pointer-events-none" style="box-shadow:inset 0 2px 6px 2px rgba(0, 0, 0, 0.06);"></div></div> <figcaption class="mt-2 text-sm text-center text-gray-600">Removable Discontinuity</figcaption></figure> <p>Road Runner wants a continuous path for motion profiling purposes. This isn't just a Road Runner quirk. Any motion profiling system (FTCLib/WPILib) will want to enforce continuity.
When Road Runner throws that <code>PathContinuityException</code>, your path is no longer continuous. This means that it takes a sudden jump in velocity or position. This can only happen in cases of infinite velocity or acceleration, obviously not possible in the real world.
Motion profiling generates the exact path you need to take. Therefore, all the trajectories you create must follow the laws of physics and be continuous.</p> <figure align="center"><img src="https://cdn.statically.io/gh/NoahBres/LearnRoadRunner/1c0fe8d5/docs/assets/trajectory-overview/continuity-error-bot-quarter.jpg" alt="Image depicting a continuity error on a path caused by two right angle paths"> <figcaption class="mt-2 text-center text-gray-600">PathContinuityException Example</figcaption></figure> <p>When looking at the path above, your bot <em>physically cannot</em> follow that exact path. Imagine the bot moving along that path in your head. It gets towards the edge the of pink line at full speed and it wants to suddenly strafe right.
However, it still has momentum upwards so it'll make an arc instead of making that exact right turn. Instantly strafing right would require an instanteous change in velocity. Even if you had rocket boosters on your bot, it would still make a <em>slight</em> arc.
To follow that path exactly, it needs to decelerate, or slow down, towards the end of the pink path and come to a full stop to shed any forward momentum. Then, it is able to make that right strafe.</p> <p>So what do we do? There are two options:</p> <ol><li><strong>Split your path into two separate trajectories</strong></li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Trajectory</span> traj1 <span class="token operator">=</span> drive<span class="token punctuation">.</span><span class="token function">trajectoryBuilder</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Pose2d</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">strafeRight</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">Trajectory</span> traj2 <span class="token operator">=</span> drive<span class="token punctuation">.</span><span class="token function">trajectoryBuilder</span><span class="token punctuation">(</span>traj1<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

drive<span class="token punctuation">.</span><span class="token function">followTrajectory</span><span class="token punctuation">(</span>traj1<span class="token punctuation">)</span><span class="token punctuation">;</span>
drive<span class="token punctuation">.</span><span class="token function">followTrajectory</span><span class="token punctuation">(</span>traj2<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>This method is completely viable and there is nothing wrong with it. However, it will decelerate at the end of each path. So your bot with first strafe right, slow down, stop, and then go forward. It will not smoothly transition from strafing right to going forward.
This takes longer as your bot will have to keep stopping and accelerating on each path. Check out the <a href="#running-multiple-trajectories">Running Multiple Trajectories</a> section to ensure that you're doing this correctly.</p> <ol start="2"><li><strong>Use spline paths to retain continuity</strong></li></ol> <p>This is the more optimal method of creating multi-part paths. Spline paths allow you to retain continuity and smoothly transition into other movements.
The only quirk is that splines can make odd shapes if you don't understand how to use them correctly. It is highly recommended to run all your paths through a <a href="/tools">path visualization tool</a>.
Check out the <a href="/trajectorybuilder-functions">TrajectoryBuilder Function List</a> to see all your options.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Trajectory</span> traj <span class="token operator">=</span> drive<span class="token punctuation">.</span><span class="token function">trajectoryBuilder</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Pose2d</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">splineTo</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Vector2d</span><span class="token punctuation">(</span>x1<span class="token punctuation">,</span> y1<span class="token punctuation">)</span><span class="token punctuation">,</span> heading<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">splineTo</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Vector2d</span><span class="token punctuation">(</span>x2<span class="token punctuation">,</span> y2<span class="token punctuation">)</span><span class="token punctuation">,</span> heading<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><figure align="center"><img src="https://cdn.statically.io/gh/NoahBres/LearnRoadRunner/1c0fe8d5/docs/assets/trajectory-overview/continuity-error-fix-bot-quarter.jpg" alt="Image describing a path preserving continuity through a spline"> <figcaption class="mt-2 text-center text-gray-600">Spline Goodness. CAD provided by Aman of 3916</figcaption></figure> <h2 id="set-pose-estimate"><a href="#set-pose-estimate" class="header-anchor">#</a> Set Pose Estimate</h2> <div class="custom-block danger"><p class="custom-block-title">WARNING</p> <p>MAKE SURE TO DO THIS BEFORE RUNNING YOUR OWN OPMODES</p></div> <p>Before you follow your trajectory in your opmode, your localizer's position has to match up with your motion profile's location. By default, your localizer's position is set to x: 0, y: 0. However, if you define a custom start pose for your motion profile your localizer's location will be out of sync and you will notice weird behavior in your following. Your bot will probably start moving in some random line. This is because the translational/heading PID tries to compensate for this disparity. You won't notice this if you don't have translational/heading PID on.</p> <p>Be sure to add <code>drive.setPoseEstimate(new Pose2d())</code> to your opmode, before your first motion profiling matching its start pose.</p> <p>E.g.</p> <div class="language-java extra-class"><div class="highlight-lines"><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">runOpMode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">SampleMecanumDrive</span> drive <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SampleMecanumDrive</span><span class="token punctuation">(</span>hardwareMap<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// We want to start the bot at x: 10, y: -8, heading: 90 degrees</span>
  <span class="token class-name">Pose2d</span> startPose <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Pose2d</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">toRadians</span><span class="token punctuation">(</span><span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  drive<span class="token punctuation">.</span><span class="token function">setPoseEstimate</span><span class="token punctuation">(</span>startPose<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token class-name">Trajectory</span> traj1 <span class="token operator">=</span> drive<span class="token punctuation">.</span><span class="token function">trajectoryBuilder</span><span class="token punctuation">(</span>startPose<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">splineTo</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Vector2d</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">toRadians</span><span class="token punctuation">(</span><span class="token number">45</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token class-name">Trajectory</span> traj2 <span class="token operator">=</span> drive<span class="token punctuation">.</span><span class="token function">trajectoryBuilder</span><span class="token punctuation">(</span>traj1<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">splineTo</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Vector2d</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">toRadians</span><span class="token punctuation">(</span><span class="token number">45</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  drive<span class="token punctuation">.</span><span class="token function">followTrajectory</span><span class="token punctuation">(</span>traj1<span class="token punctuation">)</span><span class="token punctuation">;</span>
  drive<span class="token punctuation">.</span><span class="token function">followTrajectory</span><span class="token punctuation">(</span>traj2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>drive.setPoseEstimate()</code> need only be called once before the first trajectory.</p> <h2 id="running-multiple-trajectories"><a href="#running-multiple-trajectories" class="header-anchor">#</a> Running Multiple Trajectories</h2> <p>Even if you are running spline paths to ensure continuous paths, you will eventually need to run a second trajectory. A trajectory represents a continuous movement and should end when your bot comes to a halt.
If your bot goes back and forth, each movement that the bot comes to halt or reverses direction should be its own trajectory.</p> <p><strong>How to run multiple trajectories</strong>:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Trajectory</span> traj1 <span class="token operator">=</span> drive<span class="token punctuation">.</span><span class="token function">trajectoryBuilder</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Pose2d</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">strafeRight</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">Trajectory</span> traj2 <span class="token operator">=</span> drive<span class="token punctuation">.</span><span class="token function">trajectoryBuilder</span><span class="token punctuation">(</span>traj1<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">splineTo</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Vector2d</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">splineTo</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Vector2d</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">Trajectory</span> traj3 <span class="token operator">=</span> drive<span class="token punctuation">.</span><span class="token function">trajectoryBuilder</span><span class="token punctuation">(</span>traj2<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">splineTo</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Vector2d</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">splineTo</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Vector2d</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

drive<span class="token punctuation">.</span><span class="token function">followTrajectory</span><span class="token punctuation">(</span>traj1<span class="token punctuation">)</span><span class="token punctuation">;</span>
robot<span class="token punctuation">.</span><span class="token function">dropServo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
drive<span class="token punctuation">.</span><span class="token function">followTrajectory</span><span class="token punctuation">(</span>traj2<span class="token punctuation">)</span><span class="token punctuation">;</span>
drive<span class="token punctuation">.</span><span class="token function">followTrajectory</span><span class="token punctuation">(</span>traj3<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>There are a few things to notice here.</p> <ol><li>When making trajectories that call one after each other, the starting pose of the following trajectories should be the previous trajectory's <code>end()</code> value.</li> <li>Generate all your trajectories before calling any of the <code>followTrajectory()</code> functions. Generating a trajectory takes like half a second and if you generate them on the fly you will notice a slight pause between your paths.</li> <li>Notice the <code>robot.dropServo()</code> function. Each <code>drive.followTrajectory()</code> function is synchronous. This means that the opmode won't move on to the next line until that trajectory is done following. So <code>robot.dropServo()</code> will be called after the
first trajectory is finished. Then it will follow the second trajectory after <code>robot.dropServo()</code> is finished. If you want to follow trajectories asynchronously, check the <a href="/advanced#async-following">advanced</a> section for further details.</li></ol> <h2 id="trajectories-vs-turns"><a href="#trajectories-vs-turns" class="header-anchor">#</a> Trajectories vs Turns</h2> <p>The <code>SampleMecanumDrive.java</code> class provided by the quickstart supports a <code>turn()</code> function. However, this <code>turn()</code> function is actually not part of the Road Runner core itself. It is simple a turning motion profile generated in the <code>SampleMecanumDrive.java</code> class.
Thus, it can not be called in a trajectory. Treat it as a method similar to <code>followTrajectory()</code>.</p> <div class="language-java extra-class"><pre class="language-java"><code>drive<span class="token punctuation">.</span><span class="token function">followTrajectory</span><span class="token punctuation">(</span>traj1<span class="token punctuation">)</span><span class="token punctuation">;</span>
drive<span class="token punctuation">.</span><span class="token function">turn</span><span class="token punctuation">(</span><span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">toRadians</span><span class="token punctuation">(</span><span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
drive<span class="token punctuation">.</span><span class="token function">followTrajectory</span><span class="token punctuation">(</span>traj2<span class="token punctuation">)</span><span class="token punctuation">;</span>
drive<span class="token punctuation">.</span><span class="token function">turn</span><span class="token punctuation">(</span><span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">toRadians</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">270</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="going-backwards"><a href="#going-backwards" class="header-anchor">#</a> Going Backwards</h2> <p>Say you want to drive your robot in reverse. <code>TrajectoryBuilder</code> actually makes this quite simple.</p> <div class="language-java extra-class"><div class="highlight-lines"><div class="highlighted"> </div><br><br><br></div><pre class="language-java"><code><span class="token class-name">Trajectory</span> trajectory <span class="token operator">=</span> drive<span class="token punctuation">.</span><span class="token function">trajectoryBuilder</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Pose2d</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">splineTo</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Vector2d</span><span class="token punctuation">(</span><span class="token number">36</span><span class="token punctuation">,</span> <span class="token number">36</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">toRadians</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The <code>true</code> boolean in the second parameter indicates that you want the bot to follow the path in reverse.</p> <div class="flex flex-col items-center justify-center"><div class="py-4 box" style="width:400px;"><video width="100%" autoplay="autoplay" loop="loop" playsinline="true" muted="muted" class="md:rounded"><source src="./assets/trajectory-overview/reversed-demo.mp4" type="video/mp4">
    Your browser does not support the video tag 😢.
  </video></div></div> <p>This is actually just a shorthand for passing a heading of 180 degrees into the second parameter.
The <code>TrajectoryBuilder</code> supports any arbitrary heading in the second parameter.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Trajectory</span> trajectory <span class="token operator">=</span> drive<span class="token punctuation">.</span><span class="token function">trajectoryBuilder</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Pose2d</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">toRadians</span><span class="token punctuation">(</span><span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">splineTo</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Vector2d</span><span class="token punctuation">(</span><span class="token number">36</span><span class="token punctuation">,</span> <span class="token number">36</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">toRadians</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The code above will tell your bot to follow the entire path at a 90 degree angle.</p> <h2 id="trajectories-after-turns"><a href="#trajectories-after-turns" class="header-anchor">#</a> Trajectories After Turns</h2> <p>If you use a tool like RRPathVisualizer, you may realize that sprinkling turns between trajectories can break the path following.</p> <p>Take the following example:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Trajectory</span> traj1 <span class="token operator">=</span> drive<span class="token punctuation">.</span><span class="token function">trajectoryBuilder</span><span class="token punctuation">(</span>startPose<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">Trajectory</span> traj2 <span class="token operator">=</span> drive<span class="token punctuation">.</span><span class="token function">trajectoryBuilder</span><span class="token punctuation">(</span>traj1<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">strafeLeft</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

drive<span class="token punctuation">.</span><span class="token function">followTrajectory</span><span class="token punctuation">(</span>traj1<span class="token punctuation">)</span><span class="token punctuation">;</span>
drive<span class="token punctuation">.</span><span class="token function">turn</span><span class="token punctuation">(</span><span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">toRadians</span><span class="token punctuation">(</span><span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
drive<span class="token punctuation">.</span><span class="token function">followTrajectory</span><span class="token punctuation">(</span>traj2<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>You will realize that <code>traj2</code> uses <code>traj1.end()</code> as its start pose. However, we have a <code>drive.turn()</code> call in between the two trajectories. So <code>traj2</code> doesn't actually start in the correct orientation because of the turn. It is completely fine when using relative movements like <code>forward()</code> and <code>strafeLeft()</code>. However, using absolute movements like <code>splineTo()</code> and <code>lineTo()</code> will break, especially if you have the follower PID's turned on. How do we go about fixing this? Just add the appropriate rotation to each trajectory start like so:</p> <div class="language-java extra-class"><div class="highlight-lines"><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br></div><pre class="language-java"><code><span class="token class-name">Trajectory</span> traj1 <span class="token operator">=</span> drive<span class="token punctuation">.</span><span class="token function">trajectoryBuilder</span><span class="token punctuation">(</span>startPose<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// We just add a 90 degree heading rotation to traj1.end()</span>
<span class="token class-name">Trajectory</span> traj2 <span class="token operator">=</span> drive<span class="token punctuation">.</span><span class="token function">trajectoryBuilder</span><span class="token punctuation">(</span>traj1<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">plus</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Pose2d</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">toRadians</span><span class="token punctuation">(</span><span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">strafeLeft</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

drive<span class="token punctuation">.</span><span class="token function">followTrajectory</span><span class="token punctuation">(</span>traj1<span class="token punctuation">)</span><span class="token punctuation">;</span>
drive<span class="token punctuation">.</span><span class="token function">turn</span><span class="token punctuation">(</span><span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">toRadians</span><span class="token punctuation">(</span><span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
drive<span class="token punctuation">.</span><span class="token function">followTrajectory</span><span class="token punctuation">(</span>traj2<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Notice that we took the <code>traj1.end()</code> pose and simply added a new pose with x: 0, y: 0, and a 90 degree heading to simulate the turn. Just ensure that the heading in the added pose matches the turn preceding that trajectory and that x and y are left at zero.</p> <h2 id="slowing-down-a-trajectory"><a href="#slowing-down-a-trajectory" class="header-anchor">#</a> Slowing Down a Trajectory</h2> <p>Say you want to go slower for just a portion of your trajectory. Perhaps you want some fine control of an intake procedure and wish to slow down the path following. How would we go about that?</p> <p>Like so:</p> <div class="language-java extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br><br><br></div><pre class="language-java"><code><span class="token punctuation">.</span><span class="token function">splineTo</span><span class="token punctuation">(</span>
  <span class="token keyword">new</span> <span class="token class-name">Vector2d</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">toRadians</span><span class="token punctuation">(</span><span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token class-name">SampleMecanumDrive</span><span class="token punctuation">.</span><span class="token function">getVelocityConstraint</span><span class="token punctuation">(</span>slowerVelocity<span class="token punctuation">,</span> <span class="token class-name">DriveConstants</span><span class="token punctuation">.</span>MAX_ANG_VEL<span class="token punctuation">,</span> <span class="token class-name">DriveConstants</span><span class="token punctuation">.</span>TRACK_WIDTH<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token class-name">SampleMecanumDrive</span><span class="token punctuation">.</span><span class="token function">getAccelerationConstraint</span><span class="token punctuation">(</span><span class="token class-name">DriveConstants</span><span class="token punctuation">.</span>MAX_ACCEL<span class="token punctuation">)</span>
<span class="token punctuation">)</span>

<span class="token comment">// You can do the same with any TrajectoryBuilder function. Simply paste the above snippet after the standard parameters</span>

<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>
    <span class="token keyword">new</span> <span class="token class-name">Vector2d</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token class-name">SampleMecanumDrive</span><span class="token punctuation">.</span><span class="token function">getVelocityConstraint</span><span class="token punctuation">(</span>slowerVelocity<span class="token punctuation">,</span> <span class="token class-name">DriveConstants</span><span class="token punctuation">.</span>MAX_ANG_VEL<span class="token punctuation">,</span> <span class="token class-name">DriveConstants</span><span class="token punctuation">.</span>TRACK_WIDTH<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token class-name">SampleMecanumDrive</span><span class="token punctuation">.</span><span class="token function">getAccelerationConstraint</span><span class="token punctuation">(</span><span class="token class-name">DriveConstants</span><span class="token punctuation">.</span>MAX_ACCEL<span class="token punctuation">)</span>
<span class="token punctuation">)</span>

<span class="token comment">// Example:</span>

drive<span class="token punctuation">.</span><span class="token function">trajectoryBuilder</span><span class="token punctuation">(</span>startPose<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token comment">// This spline is limited to 15 in/s and will be slower</span>
  <span class="token punctuation">.</span><span class="token function">splineTo</span><span class="token punctuation">(</span>
    <span class="token keyword">new</span> <span class="token class-name">Vector2d</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token class-name">SampleMecanumDrive</span><span class="token punctuation">.</span><span class="token function">getVelocityConstraint</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">,</span> <span class="token class-name">DriveConstants</span><span class="token punctuation">.</span>MAX_ANG_VEL<span class="token punctuation">,</span> <span class="token class-name">DriveConstants</span><span class="token punctuation">.</span>TRACK_WIDTH<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token class-name">SampleMecanumDrive</span><span class="token punctuation">.</span><span class="token function">getAccelerationConstraint</span><span class="token punctuation">(</span><span class="token class-name">DriveConstants</span><span class="token punctuation">.</span>MAX_ACCEL<span class="token punctuation">)</span>
  <span class="token punctuation">)</span>

  <span class="token comment">// This spline will be normal speed</span>
  <span class="token punctuation">.</span><span class="token function">splineTo</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Vector2d</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">toRadians</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p><em>(This sample requires the latest version of the Road Runner Quickstart—after Apr. 15, 2021)</em></p> <h2 id="coordinate-system"><a href="#coordinate-system" class="header-anchor">#</a> Coordinate System</h2> <p>We're going to clarify the FTC coordinate system just because the official Road Runner GUI and David's RRPathVisualizer use a rotated field and it may be confusing.</p> <p>The <code>0,0</code> origin of the field is at the center of the field.</p> <p>The Red Alliance Station is used as the frame of reference as it is clearly defined upon every game.</p> <p>The X axis extends through the origin and runs <em>parallel</em> with the Red Alliance Station. The X axis value increases to the right.</p> <p>The Y axis extends through the origin and runs <em>perpendicular</em> to the Red Alliance Station. The axis value increases away from the Red Alliance Station.</p> <figure align="center"><div class="relative overflow-hidden rounded-lg"><img src="https://cdn.statically.io/gh/NoahBres/LearnRoadRunner/1c0fe8d5/docs/assets/trajectory-overview/field-w-axes-half.jpg" alt="Image of the skystone field"> <div class="absolute top-0 left-0 w-full h-full pointer-events-none" style="box-shadow:inset 0 2px 6px 2px rgba(0, 0, 0, 0.06);"></div></div> <figcaption class="mt-2 text-sm text-center text-gray-600">2019/20 Skystone Field</figcaption></figure> <p>Notice how the field is rotated 90 degrees relative to if we were looking at it from the audience's point of view. This is because the frame of reference is defined by the Red Alliance Station. Be mindful of this as Road Runner's official GUI and RRPathVisualizer both opt for the &quot;proper&quot; orientation of the field. Thus, in their maps, Y increase to the left and X increases up.</p> <p>Specifications for the official FTC coordinate system can be found <a href="https://github.com/ftctechnh/ftc_app/files/989938/FTC_FieldCoordinateSystemDefinition.pdf" target="_blank" rel="noopener noreferrer">here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/NoahBres/LearnRoadRunner/edit/master/docs/trajectories.md" target="_blank" rel="noopener noreferrer">Edit this page on Github!</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2/11/2024, 12:04:00 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/LearnRoadRunner/spline-test.html" class="prev">
        Spline Test
      </a></span> <span class="next"><a href="/LearnRoadRunner/trajectorybuilder-functions.html">
        TrajectoryBuilder Function List
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/LearnRoadRunner/assets/js/app.70b0e82d.js" defer></script><script src="/LearnRoadRunner/assets/js/3.cb25a48f.js" defer></script><script src="/LearnRoadRunner/assets/js/51.c9220e12.js" defer></script><script src="/LearnRoadRunner/assets/js/39.f0aaf84c.js" defer></script>
  </body>
</html>
