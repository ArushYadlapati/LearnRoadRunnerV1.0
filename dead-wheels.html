<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Dead Wheels | Learn Road Runner</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/LearnRoadRunner/assets/baby/baby-rr.svg">
    <link rel="manifest" href="/LearnRoadRunner/manifest.json">
    <link rel="apple-touch-icon" sizes="180x180" href="/LearnRoadRunner/assets/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/LearnRoadRunner/assets/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/LearnRoadRunner/assets/favicons/favicon-16x16.png">
    <link rel="mask-icon" href="/LearnRoadRunner/assets/favicons/safari-pinned-tab.svg" color="#1a56db">
    <link rel="shortcut icon" href="/LearnRoadRunner/assets/favicons/favicon.ico">
    <meta name="description" content="Learn the ins-and-outs of the Road Runner library">
    <meta description="Configure and tune your dead wheels">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="1a56db">
    <meta name="msapplication-TileColor" content="#1a56db">
    <meta name="msapplication-config" content="/assets/favicons/browserconfig.xml">
    <meta name="theme-color" content="#1a56db">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Learn Road Runner">
    <meta property="og:description" content="Level up your auto.
Road Runner made easy.">
    <meta property="og:image" content="https://www.learnroadrunner.com/assets/baby/baby-rr-150ppi.png">
    <meta property="twitter:card" content="summary">
    <meta property="twitter:title" content="Vue.js">
    <meta property="twitter:description" content="FTC's Road Runner library made easy">
    <meta property="twitter:image" content="https://www.learnroadrunner.com/assets/baby/baby-rr-150ppi.png">
    
    <link rel="preload" href="/LearnRoadRunner/assets/css/0.styles.65dd92f2.css" as="style"><link rel="preload" href="/LearnRoadRunner/assets/js/app.70b0e82d.js" as="script"><link rel="preload" href="/LearnRoadRunner/assets/js/3.cb25a48f.js" as="script"><link rel="preload" href="/LearnRoadRunner/assets/js/43.ce0d1bfc.js" as="script"><link rel="prefetch" href="/LearnRoadRunner/assets/js/1.841b5210.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/10.c292f533.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/11.6572b6c9.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/12.fbf7d8fe.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/13.8efb3902.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/14.1ae4f896.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/15.94fcc245.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/16.7485b5d2.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/17.8a959bf0.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/18.66d7cf5b.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/19.504d287a.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/20.7b5a0c98.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/21.303fae7d.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/22.7872f33d.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/23.4d855302.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/24.c5319172.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/25.d093b2f1.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/26.97f458db.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/27.8c9b02dc.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/28.d53000bd.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/29.70ada287.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/30.ec2485bf.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/31.eaf62819.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/32.6ca4d50c.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/33.6a148470.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/34.302892f8.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/35.aaca1dc7.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/36.278adaad.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/37.fd8adb56.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/38.dc83b582.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/39.f0aaf84c.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/4.376f9cfe.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/40.42b268e2.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/41.b2e037a1.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/42.781d32ed.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/44.a156f125.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/45.e9187642.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/46.a2052eee.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/47.8947184e.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/48.c543e155.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/49.f29e5dd6.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/5.95d94c74.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/50.c6a04834.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/51.c9220e12.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/52.a8914b8a.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/53.e1ef0c00.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/6.09ef5a79.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/7.ec5c5df0.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/8.b346167d.js"><link rel="prefetch" href="/LearnRoadRunner/assets/js/9.4ed43a43.js">
    <link rel="stylesheet" href="/LearnRoadRunner/assets/css/0.styles.65dd92f2.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/LearnRoadRunner/" class="home-link router-link-active"><img src="/LearnRoadRunner/assets/baby/baby-rr.svg" alt="Learn Road Runner" class="logo"> <span class="site-name can-hide">Learn Road Runner</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/NoahBres/LearnRoadRunner" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/NoahBres/LearnRoadRunner" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/LearnRoadRunner/" aria-current="page" class="sidebar-link">Migration</a></li><li><a href="/LearnRoadRunner/introduction.html" class="sidebar-link">What is Road Runner?</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/LearnRoadRunner/introduction.html#frequently-asked-questions" class="sidebar-link">Frequently Asked Questions</a></li></ul></li><li><a href="/LearnRoadRunner/before-you-start.html" class="sidebar-link">Before You Start!</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/LearnRoadRunner/before-you-start.html#terms-to-know" class="sidebar-link">Terms to Know</a></li></ul></li><li><a href="/LearnRoadRunner/installing.html" class="sidebar-link">Installing</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/LearnRoadRunner/installing.html#method-1-downloading-the-quickstart" class="sidebar-link">Method 1: Downloading the Quickstart</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/installing.html#method-2-installing-rr-on-your-project" class="sidebar-link">Method 2: Installing RR on Your Project</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/installing.html#upgrading-firmware" class="sidebar-link">Upgrading Firmware</a></li></ul></li><li><a href="/LearnRoadRunner/quickstart-overview.html" class="sidebar-link">High Level Overview</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/LearnRoadRunner/quickstart-overview.html#what-s-feedforward" class="sidebar-link">What's Feedforward?</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/quickstart-overview.html#where-is-drivevelocitypid" class="sidebar-link">Where is DriveVelocityPID?</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/quickstart-overview.html#drive-constants" class="sidebar-link">Drive Constants</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/quickstart-overview.html#dead-wheels" class="sidebar-link">Dead Wheels</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/quickstart-overview.html#localization-test" class="sidebar-link">Localization Test*</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/quickstart-overview.html#drivefeedforwardtuner" class="sidebar-link">DriveFeedforwardTuner</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/quickstart-overview.html#drivevelocitypidtuner" class="sidebar-link">DriveVelocityPIDTuner</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/quickstart-overview.html#straight-test" class="sidebar-link">Straight Test</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/quickstart-overview.html#trackwidthtuner" class="sidebar-link">TrackWidthTuner</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/quickstart-overview.html#turn-test" class="sidebar-link">Turn Test</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/quickstart-overview.html#localization-test-2" class="sidebar-link">Localization Test**</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/quickstart-overview.html#followerpidtuner" class="sidebar-link">FollowerPIDTuner</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/quickstart-overview.html#spline-test" class="sidebar-link">Spline Test</a></li></ul></li><li><a href="/LearnRoadRunner/drive-constants.html" class="sidebar-link">Drive Constants</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/LearnRoadRunner/drive-constants.html#ticks-per-rev-max-rpm" class="sidebar-link">Ticks Per Rev &amp; Max RPM</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/drive-constants.html#run-using-encoder-motor-velo-pid" class="sidebar-link">Run Using Encoder &amp; Motor Velo PID</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/drive-constants.html#wheel-radius-gear-ratio-trackwidth" class="sidebar-link">Wheel Radius/Gear Ratio/TrackWidth</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/drive-constants.html#kv-ka-kstatic" class="sidebar-link">kV/kA/kStatic</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/drive-constants.html#base-constraints" class="sidebar-link">Base Constraints</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/drive-constants.html#samplemecanumdrive-hardware-id-s" class="sidebar-link">SampleMecanumDrive - Hardware ID's</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/drive-constants.html#samplemecanumdrive-imu-velocity" class="sidebar-link">SampleMecanumDrive - IMU Velocity</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/drive-constants.html#samplemecanumdrive-motor-direction" class="sidebar-link">SampleMecanumDrive - Motor Direction</a></li></ul></li><li><a href="/LearnRoadRunner/dead-wheels.html" aria-current="page" class="active sidebar-link">Dead Wheels</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/LearnRoadRunner/dead-wheels.html#two-wheel-odometry" class="sidebar-link">Two-Wheel Odometry</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/dead-wheels.html#three-wheel-odometry" class="sidebar-link">Three-Wheel Odometry</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/dead-wheels.html#tuning-two-wheel" class="sidebar-link">Tuning - Two-Wheel</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/dead-wheels.html#tuning-three-wheel" class="sidebar-link">Tuning - Three-Wheel</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/dead-wheels.html#troubleshooting" class="sidebar-link">Troubleshooting</a></li></ul></li><li><a href="/LearnRoadRunner/feedforward-tuning.html" class="sidebar-link">Feedforward Tuning</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/LearnRoadRunner/feedforward-tuning.html#tuning" class="sidebar-link">Tuning</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/feedforward-tuning.html#troubleshooting" class="sidebar-link">Troubleshooting</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/feedforward-tuning.html#feedforward-tuning-simulator" class="sidebar-link">Feedforward Tuning Simulator</a></li></ul></li><li><a href="/LearnRoadRunner/straight-test.html" class="sidebar-link">Straight Test Tuning</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/LearnRoadRunner/straight-test.html#tuning-lateral-multiplier-dead-wheels" class="sidebar-link">Tuning Lateral Multiplier - Dead Wheels</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/straight-test.html#drive-encoder-localization" class="sidebar-link">Drive Encoder Localization</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/straight-test.html#troubleshooting" class="sidebar-link">Troubleshooting</a></li></ul></li><li><a href="/LearnRoadRunner/trackwidth-tuning.html" class="sidebar-link">Track Width Tuning</a></li><li><a href="/LearnRoadRunner/turn-test.html" class="sidebar-link">Turn Test Tuning</a></li><li><a href="/LearnRoadRunner/localization-test-2.html" class="sidebar-link">Localization Test 2*</a></li><li><a href="/LearnRoadRunner/follower-pid-tuning.html" class="sidebar-link">Follower PID Tuning</a></li><li><a href="/LearnRoadRunner/spline-test.html" class="sidebar-link">Spline Test</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/LearnRoadRunner/spline-test.html#diagnostic-tips" class="sidebar-link">Diagnostic Tips</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/spline-test.html#hiding-the-tuning-opmodes" class="sidebar-link">Hiding the tuning opmodes</a></li></ul></li><li><a href="/LearnRoadRunner/trajectories.html" class="sidebar-link">Trajectories Overview</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectories.html#trajectories-vs-paths" class="sidebar-link">Trajectories vs Paths</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectories.html#vectors-and-poses" class="sidebar-link">Vectors and Poses</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectories.html#building-a-trajectory" class="sidebar-link">Building a Trajectory</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectories.html#path-continuity-exception" class="sidebar-link">Path Continuity Exception</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectories.html#set-pose-estimate" class="sidebar-link">Set Pose Estimate</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectories.html#running-multiple-trajectories" class="sidebar-link">Running Multiple Trajectories</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectories.html#trajectories-vs-turns" class="sidebar-link">Trajectories vs Turns</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectories.html#going-backwards" class="sidebar-link">Going Backwards</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectories.html#trajectories-after-turns" class="sidebar-link">Trajectories After Turns</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectories.html#slowing-down-a-trajectory" class="sidebar-link">Slowing Down a Trajectory</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectories.html#coordinate-system" class="sidebar-link">Coordinate System</a></li></ul></li><li><a href="/LearnRoadRunner/trajectorybuilder-functions.html" class="sidebar-link">TrajectoryBuilder Function List</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectorybuilder-functions.html#forward-distance-double" class="sidebar-link">.forward(distance: Double)</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectorybuilder-functions.html#back-distance-double" class="sidebar-link">.back(distance: Double)</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectorybuilder-functions.html#strafeleft-distance-double" class="sidebar-link">.strafeLeft(distance: Double)</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectorybuilder-functions.html#straferight-distance-double" class="sidebar-link">.strafeRight(distance: Double)</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectorybuilder-functions.html#strafeto-endposition-vector2d" class="sidebar-link">.strafeTo(endPosition: Vector2d)</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectorybuilder-functions.html#lineto-endposition-vector2d" class="sidebar-link">.lineTo(endPosition: Vector2d)</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectorybuilder-functions.html#linetoconstantheading-endposition-vector2d" class="sidebar-link">.lineToConstantHeading(endPosition: Vector2d)</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectorybuilder-functions.html#linetolinearheading-endpose-pose2d" class="sidebar-link">.lineToLinearHeading(endPose: Pose2d)</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectorybuilder-functions.html#linetosplineheading-endpose-pose2d" class="sidebar-link">.lineToSplineHeading(endPose: Pose2d)</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectorybuilder-functions.html#splineto-endposition-vector2d-endtangent-double" class="sidebar-link">.splineTo(endPosition: Vector2d, endTangent: Double)</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectorybuilder-functions.html#splinetoconstantheading-endposition-vector2d-endtangent-double" class="sidebar-link">.splineToConstantHeading(endPosition: Vector2d, endTangent: Double)</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectorybuilder-functions.html#splinetolinearheading-endpose-pose2d-endtangent-double" class="sidebar-link">.splineToLinearHeading(endPose: Pose2d, endTangent: Double)</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectorybuilder-functions.html#splinetosplineheading-endpose-pose2d-endtangent-double" class="sidebar-link">.splineToSplineHeading(endPose: Pose2d, endTangent: Double)</a></li></ul></li><li><a href="/LearnRoadRunner/markers.html" class="sidebar-link">Marker Guide</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/LearnRoadRunner/markers.html#types-of-markers" class="sidebar-link">Types of Markers</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/markers.html#temporal-markers-basics" class="sidebar-link">Temporal Markers - Basics</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/markers.html#displacement-markers-basics" class="sidebar-link">Displacement Markers - Basics</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/markers.html#spatial-markers-basics" class="sidebar-link">Spatial Markers - Basics</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/markers.html#things-to-keep-in-mind" class="sidebar-link">Things to Keep In Mind</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/markers.html#advanced-marker-use" class="sidebar-link">Advanced Marker Use</a></li></ul></li><li><a href="/LearnRoadRunner/trajectory-sequence.html" class="sidebar-link">Trajectory Sequence</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectory-sequence.html#overview" class="sidebar-link">Overview</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectory-sequence.html#everything-from-the-trajectorybuilder-list" class="sidebar-link">Everything from the TrajectoryBuilder list</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectory-sequence.html#turn-radians" class="sidebar-link">.turn(radians)</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectory-sequence.html#waitseconds-seconds" class="sidebar-link">.waitSeconds(seconds)</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectory-sequence.html#addtemporalmarker-markercallback" class="sidebar-link">.addTemporalMarker(MarkerCallback)</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectory-sequence.html#unstable-addtemporalmarkeroffset-offset-markercallback" class="sidebar-link">.UNSTABLE_addTemporalMarkerOffset(offset, MarkerCallback)</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectory-sequence.html#unstable-adddisplacementmarkeroffset-offset-markercallback" class="sidebar-link">.UNSTABLE_addDisplacementMarkerOffset(offset, MarkerCallback)</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectory-sequence.html#marker-use-examples" class="sidebar-link">Marker Use Examples</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectory-sequence.html#settangent-double" class="sidebar-link">.setTangent(double)</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectory-sequence.html#setreversed-boolean" class="sidebar-link">.setReversed(boolean)</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectory-sequence.html#setconstraints-trajectoryvelocityconstraint-trajectoryaccelerationconstraint" class="sidebar-link">.setConstraints(TrajectoryVelocityConstraint, TrajectoryAccelerationConstraint)</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectory-sequence.html#resetconstraints" class="sidebar-link">.resetConstraints()</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectory-sequence.html#setvelconstraint-trajectoryvelocityconstraint" class="sidebar-link">.setVelConstraint(TrajectoryVelocityConstraint)</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectory-sequence.html#resetvelconstraint" class="sidebar-link">.resetVelConstraint()</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectory-sequence.html#setaccelconstraint-trajectoryaccelerationconstraint" class="sidebar-link">.setAccelConstraint(TrajectoryAccelerationConstraint)</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectory-sequence.html#resetaccelconstraint" class="sidebar-link">.resetAccelConstraint()</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectory-sequence.html#setturnconstraint-maxangvel-maxangaccel" class="sidebar-link">.setTurnConstraint(maxAngVel, maxAngAccel)</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectory-sequence.html#resetturnconstraint" class="sidebar-link">.resetTurnConstraint()</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/trajectory-sequence.html#addtrajectory-trajectory" class="sidebar-link">.addTrajectory(Trajectory)</a></li></ul></li><li><a href="/LearnRoadRunner/advanced.html" class="sidebar-link">Advanced Tips</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/LearnRoadRunner/advanced.html#using-road-runner-in-teleop" class="sidebar-link">Using Road Runner in Teleop</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/advanced.html#transferring-pose-between-opmodes" class="sidebar-link">Transferring Pose Between Opmodes</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/advanced.html#async-following" class="sidebar-link">Async Following</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/advanced.html#chaining-async-trajectories" class="sidebar-link">Chaining Async Trajectories</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/advanced.html#finite-state-machine-following" class="sidebar-link">Finite State Machine Following</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/advanced.html#admissible-error-and-timeout" class="sidebar-link">Admissible Error and Timeout</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/advanced.html#_180°-turn-direction" class="sidebar-link">180° Turn Direction</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/advanced.html#gain-scheduling" class="sidebar-link">Gain Scheduling</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/advanced.html#interrupting-a-live-trajectory" class="sidebar-link">Interrupting a Live Trajectory</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/advanced.html#automatic-driving-in-teleop" class="sidebar-link">Automatic Driving in Teleop</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/advanced.html#omniwheels" class="sidebar-link">OmniWheels</a></li></ul></li><li><a href="/LearnRoadRunner/tools.html" class="sidebar-link">Tools</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/LearnRoadRunner/tools.html#meepmeep" class="sidebar-link">MeepMeep</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/tools.html#road-runner-gui" class="sidebar-link">Road Runner GUI</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/tools.html#david-s-rrpathvisualizer" class="sidebar-link">David's RRPathVisualizer</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/tools.html#rrpathgen" class="sidebar-link">RRPathGen</a></li></ul></li><li><a href="/LearnRoadRunner/resources.html" class="sidebar-link">Further Resources</a></li><li><a href="/LearnRoadRunner/drive-velocity-pid-tuning.html" class="sidebar-link">Archived</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/LearnRoadRunner/drive-velocity-pid-tuning.html#why-is-drivevelocitypid-not-used" class="sidebar-link">Why is DriveVelocityPID not used?</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/drive-velocity-pid-tuning.html#drivevelocitypid-tuning" class="sidebar-link">DriveVelocityPID tuning</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/drive-velocity-pid-tuning.html#tuning" class="sidebar-link">Tuning</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/drive-velocity-pid-tuning.html#troubleshooting" class="sidebar-link">Troubleshooting</a></li><li class="sidebar-sub-header"><a href="/LearnRoadRunner/drive-velocity-pid-tuning.html#pid-tuning-simulator" class="sidebar-link">PID Tuning Simulator</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="dead-wheels"><a href="#dead-wheels" class="header-anchor">#</a> Dead Wheels</h1> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>If you are not using dead wheels, skip this section.</p></div> <figure align="center"><img src="https://cdn.statically.io/gh/NoahBres/LearnRoadRunner/1c0fe8d5/docs/assets/you-are-here/YouAreHere-DeadWheels-half.png" alt="You are on the dead wheels step"> <figcaption class="mt-2 text-gray-600 text-center">You are here</figcaption></figure> <p>Your configuration will depend on whether you have two or three dead wheels. Don't know the difference? Check <a href="/LearnRoadRunner/#what-is-the-difference-between-two-and-three-wheel-odometry">the FAQ</a>.</p> <p>If you're using a two-wheel setup, read only the <a href="#two-wheel-odometry">two-wheel odometry section</a>.</p> <p>If you're using a three-wheel setup, read only the <a href="#three-wheel-odometry">three-wheel odometry section</a>.</p> <h2 id="two-wheel-odometry"><a href="#two-wheel-odometry" class="header-anchor">#</a> Two-Wheel Odometry</h2> <p>If you opt for the two wheel configuration, you will be using a gyroscope of your choice as the source for your heading. By default, you will be using the REV Hub's internal BNO055 gyroscope.</p> <p>Feel free to use your own gyroscope. Simply declare it in <code>SampleMecanumDrive.java</code> and override the <code>getRawExternalHeading()</code> function.</p> <p>Download <a href="https://github.com/NoahBres/road-runner-quickstart/blob/master/TeamCode/src/main/java/org/firstinspires/ftc/teamcode/drive/TwoWheelTrackingLocalizer.java" target="_blank" rel="noopener noreferrer">this file<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and stick it in your <code>TeamCode</code> folder, preferably next to the <code>StandardTrackingWheelLocalizer.java</code> file just for organizational purposes.</p> <p>Open the <code>TwoWheelTrackingLocalizer.java</code> file (that you just downloaded) to edit.</p> <h3 id="ticks-per-rev-wheel-radius-gear-ratio"><a href="#ticks-per-rev-wheel-radius-gear-ratio" class="header-anchor">#</a> Ticks Per Rev/Wheel Radius/Gear Ratio</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/* Lines 37-39 in TwoWheelTrackingLocalizer.java */</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">double</span> TICKS_PER_REV <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">double</span> WHEEL_RADIUS <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// in</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">double</span> GEAR_RATIO <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// output (wheel) speed / input (encoder) speed</span>
</code></pre></div><p><strong><code>TICKS_PER_REV</code></strong> is the number of &quot;ticks&quot; the encoders will count per revolution. You will find the specs of your encoders on your manufacturer's site. Be sure to find the <code>Counts Per Revolution</code> or <code>CPR</code>. The REV Through Bore Encoder has a <code>TICKS_PER_REV</code> of <code>8192</code>.</p> <p><strong><code>WHEEL_RADIUS</code></strong> is the radius of the dead wheel. Make sure this is the radius, not diameter.</p> <p><strong><code>GEAR_RATIO</code></strong> is the ratio of the output (wheel) speed to input (encoder) speed. If you are not gearing your encoders, leave this at 1.</p> <h3 id="parallel-perpendicular-x-y"><a href="#parallel-perpendicular-x-y" class="header-anchor">#</a> Parallel/Perpendicular X/Y</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/* Lines 41-45 in TwoWheelTrackingLocalizer.java */</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">double</span> PARALLEL_X <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// X is the forward and back direction</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">double</span> PARALLEL_Y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// Y is the strafe direction</span>

<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">double</span> PERPENDICULAR_X <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// X is the forward and back direction</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">double</span> PERPENDICULAR_Y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// Y is the strafe direction</span>
</code></pre></div><p>Put in the X/Y coordinates of your perpendicular and parallel wheels. Remember that the X axis is the forward/back direction and the Y axis is the left/right direction. This is fairly standard for robotics/aviation/etc.</p> <figure align="center"><img src="https://cdn.statically.io/gh/NoahBres/LearnRoadRunner/1c0fe8d5/docs/assets/dead-wheels/andrew-bot-wheel-location-quarter.jpg" alt="Bottom view of the bot. The Y direction increase left to right. The X directions increases up." class="rounded-lg"> <figcaption class="mt-2 text-sm text-gray-600 text-center">17508 Rising Tau's 2019/20 Skystone Bot</figcaption></figure> <h3 id="encoder-directions"><a href="#encoder-directions" class="header-anchor">#</a> Encoder Directions</h3> <p>Make sure to reverse the encoder directions when appropriate.</p> <p>E.g.</p> <div class="language-java extra-class"><div class="highlight-lines"><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br></div><pre class="language-java"><code><span class="token comment">/* Lines 60-63~ in TwoWheelTrackingLocalizer.java */</span>
parallelEncoder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Encoder</span><span class="token punctuation">(</span>hardwareMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">DcMotorEx</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token string">&quot;parallelEncoder&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
perpendicularEncoder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Encoder</span><span class="token punctuation">(</span>hardwareMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">DcMotorEx</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token string">&quot;perpendicularEncoder&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// TODO: reverse any encoders using Encoder.setDirection(Encoder.Direction.REVERSE)</span>

<span class="token comment">// If you need to reverse the perpendicular encoder:</span>
<span class="token comment">// Vice-versa for the other encoder</span>
perpendicularEncoder<span class="token punctuation">.</span><span class="token function">setDirection</span><span class="token punctuation">(</span><span class="token class-name">Encoder<span class="token punctuation">.</span>Direction</span><span class="token punctuation">.</span>REVERSE<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="custom-block danger"><p class="custom-block-title">WARNING</p> <p>If you are using the Rev Through Bore encoders, please read the following section</p></div> <p>If your encoder velocity exceeds 32767 counts per second, it will cause an integer overflow when calling <code>getVelocity()</code>. This is because the Rev Hub firmware sends the velocity data using 16 bit signed integers rather than 32 bit. Due to the Rev Through Bore encoders' absurdly high CPR, this happens at around 4 rounds per second. Or only 25 inches per second with 2 inch diameter wheels.</p> <p>Change the <code>getRawVelocity()</code> functions to <code>getCorrectedVelocity()</code> in the <code>getWheelVelocities()</code> function to fix this integer overflow:</p> <div class="language-java extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br></div><pre class="language-java"><code><span class="token comment">/* Lines 86-95 in TwoWheelLocalizer.java */</span>
<span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Double</span><span class="token punctuation">&gt;</span></span> <span class="token function">getWheelVelocities</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// TODO: If your encoder velocity can exceed 32767 counts / second (such as the REV Through Bore and other</span>
    <span class="token comment">//  competing magnetic encoders), change Encoder.getRawVelocity() to Encoder.getCorrectedVelocity() to enable a</span>
    <span class="token comment">//  compensation method</span>

    <span class="token keyword">return</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>
            <span class="token function">encoderTicksToInches</span><span class="token punctuation">(</span>parallelEncoder<span class="token punctuation">.</span><span class="token function">getCorrectedVelocity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token function">encoderTicksToInches</span><span class="token punctuation">(</span>perpendicularEncoder<span class="token punctuation">.</span><span class="token function">getCorrectedVelocity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="hardware-id-s"><a href="#hardware-id-s" class="header-anchor">#</a> Hardware ID's</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/* Lines 60-61 in TwoWheelTrackingLocalizer.java */</span>
parallelEncoder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Encoder</span><span class="token punctuation">(</span>hardwareMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">DcMotorEx</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token string">&quot;parallelEncoder&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
perpendicularEncoder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Encoder</span><span class="token punctuation">(</span>hardwareMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">DcMotorEx</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token string">&quot;perpendicularEncoder&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Ensure that these ID's match up with your Rev Hub config ID's.</p> <h3 id="imu"><a href="#imu" class="header-anchor">#</a> IMU</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/* Lines 134-137 in SampleMecanumDrive.java */</span>
imu <span class="token operator">=</span> hardwareMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>BNO055IMU<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token string">&quot;imu&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">BNO055IMU<span class="token punctuation">.</span>Parameters</span> parameters <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BNO055IMU<span class="token punctuation">.</span>Parameters</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
parameters<span class="token punctuation">.</span>angleUnit <span class="token operator">=</span> <span class="token class-name">BNO055IMU<span class="token punctuation">.</span>AngleUnit</span><span class="token punctuation">.</span>RADIANS<span class="token punctuation">;</span>
imu<span class="token punctuation">.</span><span class="token function">initialize</span><span class="token punctuation">(</span>parameters<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Ensure that the IMU is initialitzed in the <code>SampleMecanumDrive.java</code> class. You shouldn't need to change anything if you downloaded the quickstart and are using the Rev Hub IMU. This section should be changed if you are using your own external gyro.</p> <h3 id="imu-velocity-axis"><a href="#imu-velocity-axis" class="header-anchor">#</a> IMU Velocity Axis</h3> <p>In your <code>SampleMecanumDrive.java</code> file, scroll to the very bottom to find the <code>getExternalHeadingVelocity</code> function. Ensure that the function returns the axis that your IMU rotates about for your configuration. Consult the ASCII diagram provided in the file for a visual on which axis you should choose. If your REV Hub is mounted flat, the bot will rotate about the Z axis. If it is on its side with the motor ports facing up or down, the robot will rotate about the Y axis. If the servo ports are facing up or down, the bot will rotate about the x axis.</p> <div class="language-java extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br></div><pre class="language-java"><code><span class="token comment">/* About lines 399-419 in SampleMecanumDrive.java */</span>
<span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token class-name">Double</span> <span class="token function">getExternalHeadingVelocity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// TODO: This must be changed to match your configuration</span>
    <span class="token comment">//                           | Z axis</span>
    <span class="token comment">//                           |</span>
    <span class="token comment">//     (Motor Port Side)     |   / X axis</span>
    <span class="token comment">//                       ____|__/____</span>
    <span class="token comment">//          Y axis     / *   | /    /|   (IO Side)</span>
    <span class="token comment">//          _________ /______|/    //      I2C</span>
    <span class="token comment">//                   /___________ //     Digital</span>
    <span class="token comment">//                  |____________|/      Analog</span>
    <span class="token comment">//</span>
    <span class="token comment">//                 (Servo Port Side)</span>
    <span class="token comment">//</span>
    <span class="token comment">// The positive x axis points toward the USB port(s)</span>
    <span class="token comment">//</span>
    <span class="token comment">// Adjust the axis rotation rate as necessary</span>
    <span class="token comment">// Rotate about the z axis is the default assuming your REV Hub/Control Hub is laying</span>
    <span class="token comment">// flat on a surface</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span> imu<span class="token punctuation">.</span><span class="token function">getAngularVelocity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>zRotationRate<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="set-localizer-in-samplemecanumdrive"><a href="#set-localizer-in-samplemecanumdrive" class="header-anchor">#</a> Set Localizer in SampleMecanumDrive</h3> <p>After you've configured your localizer, go back to the <code>SampleMecanumDrive.java</code> file.</p> <p>Look at about line 168. You should find a comment stating &quot;<code>// TODO: if desired, use setLocalizer() to change the localization method</code>&quot;</p> <p>Under this comment, add the following line:</p> <div class="language-java extra-class"><div class="highlight-lines"><br><br><br><br><br><div class="highlighted"> </div><br></div><pre class="language-java"><code><span class="token comment">/* About line 168 in SampleMecanumDrive.java */</span>

<span class="token comment">// TODO: if desired, use setLocalizer() to change the localization method</span>
<span class="token comment">// for instance, setLocalizer(new ThreeTrackingWheelLocalizer(...));</span>

<span class="token function">setLocalizer</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">TwoWheelTrackingLocalizer</span><span class="token punctuation">(</span>hardwareMap<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>You have set the localizer!</p> <div class="h-16"></div> <h2 id="three-wheel-odometry"><a href="#three-wheel-odometry" class="header-anchor">#</a> Three-Wheel Odometry</h2> <p>If you opt for the three wheel configuration, you will be using the two parallel wheels as the source for your heading.</p> <p>Open up the <code>StandardTrackingWheelLocalizer.java</code> file.</p> <h3 id="ticks-per-rev-wheel-radius-gear-ratio-2"><a href="#ticks-per-rev-wheel-radius-gear-ratio-2" class="header-anchor">#</a> Ticks Per Rev/Wheel Radius/Gear Ratio</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/* Lines 30-32 in StandardTrackingWheelLocalizer.java */</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">double</span> TICKS_PER_REV <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">double</span> WHEEL_RADIUS <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// in</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">double</span> GEAR_RATIO <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// output (wheel) speed / input (encoder) speed</span>
</code></pre></div><p><strong><code>TICKS_PER_REV</code></strong> is the number of &quot;ticks&quot; the encoders will count per revolution. You will find the specs of your encoders on your manufacturer's site. Be sure to find the <code>Counts Per Revolution</code> or <code>CPR</code>. The REV Through Bore Encoder has a <code>TICKS_PER_REV</code> of <code>8192</code>.</p> <p><strong><code>WHEEL_RADIUS</code></strong> is the radius of the dead wheel. Make sure this is the radius, not diameter.</p> <p><strong><code>GEAR_RATIO</code></strong> is the ratio of the output (wheel) speed to input (encoder) speed. If you are not gearing your encoders, leave this at 1.</p> <h3 id="lateral-distance-forward-offset"><a href="#lateral-distance-forward-offset" class="header-anchor">#</a> Lateral Distance/Forward Offset</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/* Lines 34-35 in StandardTrackingWheelLocalizer.java */</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">double</span> LATERAL_DISTANCE <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">// in; distance between the left and right wheels</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">double</span> FORWARD_OFFSET <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span> <span class="token comment">// in; offset of the lateral wheel</span>
</code></pre></div><p><strong><code>LATERAL_DISTANCE</code></strong> is the distance from the left and right wheels.</p> <p><strong><code>FORWARD_OFFSET</code></strong> is the distance from the center of rotation to the middle wheel. The <code>FORWARD_OFFSET</code> is positive when in front of the wheels and negative when behind the wheels (closer to the back).</p> <figure align="center"><img src="https://cdn.statically.io/gh/NoahBres/LearnRoadRunner/1c0fe8d5/docs/assets/dead-wheels/andrew-bot-forward-offset-quarter.jpg" alt="Bottom view of the bot. The Y direction increase left to right. The X directions increases up." class="rounded-lg"> <figcaption class="mt-2 text-sm text-gray-600 text-center">17508 Rising Tau's 2019/20 Skystone Bot</figcaption></figure> <h3 id="encoder-directions-2"><a href="#encoder-directions-2" class="header-anchor">#</a> Encoder Directions</h3> <p>Make sure to reverse the encoder directions when appropriate.</p> <p>E.g.</p> <div class="language-java extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br></div><pre class="language-java"><code><span class="token comment">/* Lines 46-63~ in StandardTrackingWheelLocalizer.java */</span>
leftEncoder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Encoder</span><span class="token punctuation">(</span>hardwareMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">DcMotorEx</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token string">&quot;leftEncoder&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
rightEncoder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Encoder</span><span class="token punctuation">(</span>hardwareMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">DcMotorEx</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token string">&quot;rightEncoder&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
frontEncoder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Encoder</span><span class="token punctuation">(</span>hardwareMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">DcMotorEx</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token string">&quot;frontEncoder&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// TODO: reverse any encoders using Encoder.setDirection(Encoder.Direction.REVERSE)</span>

<span class="token comment">// If you need to reverse the middle encoder:</span>
<span class="token comment">// Vice-versa for the other encoders</span>
frontEncoder<span class="token punctuation">.</span><span class="token function">setDirection</span><span class="token punctuation">(</span><span class="token class-name">Encoder<span class="token punctuation">.</span>Direction</span><span class="token punctuation">.</span>REVERSE<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="set-localizer-in-samplemecanumdrive-2"><a href="#set-localizer-in-samplemecanumdrive-2" class="header-anchor">#</a> Set Localizer in SampleMecanumDrive</h3> <p>After you've configured your localizer, go back to the <code>SampleMecanumDrive.java</code> file.</p> <p>Look at about line 131. You should find a comment stating &quot;<code>// TODO: if desired, use setLocalizer() to change the localization method</code>&quot;</p> <p>Under this comment, add the following line:</p> <div class="language-java extra-class"><div class="highlight-lines"><br><br><br><br><br><div class="highlighted"> </div><br></div><pre class="language-java"><code><span class="token comment">/* About line 131 in SampleMecanumDrive.java */</span>

<span class="token comment">// TODO: if desired, use setLocalizer() to change the localization method</span>
<span class="token comment">// for instance, setLocalizer(new ThreeTrackingWheelLocalizer(...));</span>

<span class="token function">setLocalizer</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">StandardTrackingWheelLocalizer</span><span class="token punctuation">(</span>hardwareMap<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>You have set the localizer!</p> <h3 id="deleting-the-imu"><a href="#deleting-the-imu" class="header-anchor">#</a> Deleting the IMU</h3> <p>The IMU does not serve a purpose in three wheel odometry. Thus, it would be ideal to get rid of the default initialization in <code>SampleMecanumDrive</code>. IMU initialization can add 2-3 seconds to the opmode initialization and it's quite annoying.</p> <p>Open <code>SampleMecanumDrive.java</code> and delete this entire section:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/* Lines 134-137 in SampleMecanumDrive.java */</span>

<span class="token comment">// TODO: adjust the names of the following hardware devices to match your configuration</span>
imu <span class="token operator">=</span> hardwareMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>BNO055IMU<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token string">&quot;imu&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">BNO055IMU<span class="token punctuation">.</span>Parameters</span> parameters <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BNO055IMU<span class="token punctuation">.</span>Parameters</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
parameters<span class="token punctuation">.</span>angleUnit <span class="token operator">=</span> <span class="token class-name">BNO055IMU<span class="token punctuation">.</span>AngleUnit</span><span class="token punctuation">.</span>RADIANS<span class="token punctuation">;</span>
imu<span class="token punctuation">.</span><span class="token function">initialize</span><span class="token punctuation">(</span>parameters<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Just for safety reasons, replace the returns of <code>getRawExternalHeading()</code> and <code>getExternalHeadingVelocity()</code> with zero:</p> <div class="language-java extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br><br><br><div class="highlighted"> </div><br><br></div><pre class="language-java"><code><span class="token comment">/* Lines 393-396 in SampleMecanumDrive.java */</span>
<span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">getRawExternalHeading</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token class-name">Double</span> <span class="token function">getExternalHeadingVelocity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">0.0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="h-16"></div> <h2 id="tuning-two-wheel"><a href="#tuning-two-wheel" class="header-anchor">#</a> Tuning - Two-Wheel</h2> <p>Tuning your dead wheels is one of the most important steps along the entire tuning process. This is not constrained to Road Runner. Any time you choose to use dead wheels, whether it be in Road Runner, FTCLib, or your own home brew path following, your localization should be as accurate as possible.</p> <h3 id="adjusting-the-wheel-radius"><a href="#adjusting-the-wheel-radius" class="header-anchor">#</a> Adjusting the wheel radius</h3> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>This isn't quite necessary for everyone. You may choose to skip over this section. However, I did find that this process would increase localization accuracy by an additional 1% or so. 1% may not sound like much but over 100 inches that is an entire inch. During the FTC Skystone (2019-2020) season, a 4-5 stone autonomous programmed traveled well over 100 inches and an entire inch of extra accuracy may have made a big difference.</p></div> <ol><li>First, open up the <code>TwoWheelTrackingLocalizer.java</code></li> <li>Declare two variables, <code>X_MULTIPLIER</code> and <code>Y_MULTIPLIER</code>, in your class:</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/* Lines 46-47 in TwoWheelTrackingLocalizer.java */</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">double</span> X_MULTIPLIER <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// Multiplier in the X direction</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">double</span> Y_MULTIPLIER <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// Multiplier in the Y direction</span>
</code></pre></div><p>A finished example of where these go may be found <a href="https://gist.github.com/NoahBres/02e83f8317f34d7b627170c2031b2ebf" target="_blank" rel="noopener noreferrer">here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <ol start="3"><li>Add these mulitpliers to the <code>getWheelPositions()</code> and <code>getWheelVelocities()</code> functions like so:</li></ol> <div class="language-java extra-class"><div class="highlight-lines"><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br></div><pre class="language-java"><code><span class="token comment">/* Lines 77-97 in TwoWheelTrackingLocalizer.java */</span>
<span class="token annotation punctuation">@NonNull</span>
<span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Double</span><span class="token punctuation">&gt;</span></span> <span class="token function">getWheelPositions</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>
            <span class="token function">encoderTicksToInches</span><span class="token punctuation">(</span>parallelEncoder<span class="token punctuation">.</span><span class="token function">getCurrentPosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> X_MULTIPLIER<span class="token punctuation">,</span>
            <span class="token function">encoderTicksToInches</span><span class="token punctuation">(</span>perpendicularEncoder<span class="token punctuation">.</span><span class="token function">getCurrentPosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> Y_MULTIPLIER
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@NonNull</span>
<span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Double</span><span class="token punctuation">&gt;</span></span> <span class="token function">getWheelVelocities</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// TODO: If your encoder velocity can exceed 32767 counts / second (such as the REV Through Bore and other</span>
    <span class="token comment">//  competing magnetic encoders), change Encoder.getRawVelocity() to Encoder.getCorrectedVelocity() to enable a</span>
    <span class="token comment">//  compensation method</span>

    <span class="token keyword">return</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>
            <span class="token function">encoderTicksToInches</span><span class="token punctuation">(</span>parallelEncoder<span class="token punctuation">.</span><span class="token function">getRawVelocity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> X_MULTIPLIER<span class="token punctuation">,</span>
            <span class="token function">encoderTicksToInches</span><span class="token punctuation">(</span>perpendicularEncoder<span class="token punctuation">.</span><span class="token function">getRawVelocity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> Y_MULTIPLIER
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Remember that the X multiplier is on the parallel encoder because x faces forward for a local coordinate frame (common for robotics/aviation/etc situations).</p> <ol start="4"><li><p>You will begin the physical tuning process. Clear a straight line for your bot to travel in. I used a 90 inch stretch of field tiles.</p></li> <li><p>Set your bot at the beginning of this stretch, facing forward.</p></li> <li><p>Run the <code>LocalizationTest</code> opmode. Do not touch the controller.</p></li> <li><p>Slowly drag your bot along this stretch. Keep the bot as straight as possible. I set a measuring tape below the entire stretch and kept the wheels as parallel as possible to this measuring tape.</p></li> <li><p>Once you reach the end of your stretch, stop. Measure the distance traveled. Then look at the distance reported on the telemetry on the RC.</p></li> <li><p>Your multiplier will be the <code>Measured Distance</code> / <code>Telemetry Distance Traveled</code> . For example, if your telemetry reports 89 inches but your tape measure reports 90 inches, your multiplier will be <code>1.01123596</code>.</p></li> <li><p>I repeated this process 3 times for the forward direction to get the average multiplier. Then, set the <code>X_MULTIPLIER</code> to this value.</p></li> <li><p>Repeat the same process but in the strafing direction.</p></li> <li><p>Set <code>Y_MULTIPLIER</code> to the calculated strafe multiplier.</p></li></ol> <h3 id="double-checking"><a href="#double-checking" class="header-anchor">#</a> Double Checking</h3> <p>We're going to double check that everything is hunky-dory with your localization.</p> <ol><li><p>Run the <code>LocalizationTest</code> opmode.</p></li> <li><p>Navigate to <code>192.168.49.1:8080/dash</code> with a phone RC or <code>192.168.43.1:8080/dash</code> with a Control Hub.</p></li> <li><p>Drive the bot around with your controller. You should see the bot being drawn on the graph in Dashboard. Make sure the drawn bot matches the movements of the actual bot.</p></li> <li><p>The x coordinates on your bot should be increasing as you move forward. The y coordinates should be increasing as you strafe left. See the <a href="/LearnRoadRunner/trajectories.html#coordinate-system">coordinate system page</a> for further details on why this is.</p></li> <li><p>Check the troubleshooting section below if you encounter any issues.</p></li></ol> <div class="h-16"></div> <h2 id="tuning-three-wheel"><a href="#tuning-three-wheel" class="header-anchor">#</a> Tuning - Three-Wheel</h2> <p>Tuning your dead wheels is one of the most important steps along the entire tuning process. This is not constrained to Road Runner. Any time you choose to use dead wheels, whether it be in Road Runner, FTCLib, or your own home brew path following, your localization should be as accurate as possible.</p> <h3 id="adjusting-the-wheel-radius-2"><a href="#adjusting-the-wheel-radius-2" class="header-anchor">#</a> Adjusting the wheel radius</h3> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>This isn't quite necessary for everyone. You may choose to skip over this section. However, I did find that this process would increase localization accuracy by an additional 1% or so. 1% may not sound like much but over 100 inches that is an entire inch. During the FTC Skystone (2019-2020) season, a 4-5 stone autonomous programmed traveled well over 100 inches and an entire inch of extra accuracy may have made a big difference.</p></div> <ol><li>First, open up the <code>StandardTrackingWheelLocalizer.java</code></li> <li>Declare two variables, <code>X_MULTIPLIER</code> and <code>Y_MULTIPLIER</code>, in your class:</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/* Lines 37-38 in StandardTrackingWheelLocalizer.java */</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">double</span> X_MULTIPLIER <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// Multiplier in the X direction</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">double</span> Y_MULTIPLIER <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// Multiplier in the Y direction</span>
</code></pre></div><p>A finished example of where these go may be found <a href="https://gist.github.com/NoahBres/9b9710eaa9f9fd23efa30a16de0f610e" target="_blank" rel="noopener noreferrer">here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <ol start="3"><li>Add these mulitpliers to the <code>getWheelPositions()</code> and <code>getWheelVelocities()</code> functions like so:</li></ol> <div class="language-java extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br></div><pre class="language-java"><code><span class="token comment">/* About Lines 67-103 in StandardTrackingWheelLocalizer.java */</span>
<span class="token annotation punctuation">@NonNull</span>
<span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Double</span><span class="token punctuation">&gt;</span></span> <span class="token function">getWheelPositions</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> leftPos <span class="token operator">=</span> leftEncoder<span class="token punctuation">.</span><span class="token function">getCurrentPosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> rightPos <span class="token operator">=</span> rightEncoder<span class="token punctuation">.</span><span class="token function">getCurrentPosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> frontPos <span class="token operator">=</span> frontEncoder<span class="token punctuation">.</span><span class="token function">getCurrentPosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    lastEncPositions<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    lastEncPositions<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>leftPos<span class="token punctuation">)</span><span class="token punctuation">;</span>
    lastEncPositions<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>rightPos<span class="token punctuation">)</span><span class="token punctuation">;</span>
    lastEncPositions<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>frontPos<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>
            <span class="token function">encoderTicksToInches</span><span class="token punctuation">(</span>leftPos<span class="token punctuation">)</span> <span class="token operator">*</span> X_MULTIPLIER<span class="token punctuation">,</span>
            <span class="token function">encoderTicksToInches</span><span class="token punctuation">(</span>rightPos<span class="token punctuation">)</span> <span class="token operator">*</span> X_MULTIPLIER<span class="token punctuation">,</span>
            <span class="token function">encoderTicksToInches</span><span class="token punctuation">(</span>frontPos<span class="token punctuation">)</span> <span class="token operator">*</span> Y_MULTIPLIER
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@NonNull</span>
<span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Double</span><span class="token punctuation">&gt;</span></span> <span class="token function">getWheelVelocities</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> leftVel <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> leftEncoder<span class="token punctuation">.</span><span class="token function">getCorrectedVelocity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> rightVel <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> rightEncoder<span class="token punctuation">.</span><span class="token function">getCorrectedVelocity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> frontVel <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> frontEncoder<span class="token punctuation">.</span><span class="token function">getCorrectedVelocity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    lastEncVels<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    lastEncVels<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>leftVel<span class="token punctuation">)</span><span class="token punctuation">;</span>
    lastEncVels<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>rightVel<span class="token punctuation">)</span><span class="token punctuation">;</span>
    lastEncVels<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>frontVel<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>
            <span class="token function">encoderTicksToInches</span><span class="token punctuation">(</span>leftVel<span class="token punctuation">)</span> <span class="token operator">*</span> X_MULTIPLIER<span class="token punctuation">,</span>
            <span class="token function">encoderTicksToInches</span><span class="token punctuation">(</span>rightVel<span class="token punctuation">)</span> <span class="token operator">*</span> X_MULTIPLIER<span class="token punctuation">,</span>
            <span class="token function">encoderTicksToInches</span><span class="token punctuation">(</span>frontVel<span class="token punctuation">)</span> <span class="token operator">*</span> Y_MULTIPLIER
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Remember that the X multiplier is on the left/right because x faces forward for a local coordinate frame (common for robotics/aviation/etc situations).</p> <ol start="4"><li><p>You will begin the physical tuning process. Clear a straight line for your bot to travel in. I used a 90 inch stretch of field tiles.</p></li> <li><p>Set your bot at the beginning of this stretch, facing forward.</p></li> <li><p>Run the <code>LocalizationTest</code> opmode. Do not touch the controller.</p></li> <li><p>Slowly drag your bot along this stretch. Keep the bot as straight as possible. I set a measuring tape below the entire stretch and kept the wheels as parallel as possible to this measuring tape.</p></li> <li><p>Once you reach the end of your stretch, stop. Measure the distance traveled. Then look at the distance reported on the telemetry on the RC.</p></li> <li><p>Your multiplier will be the <code>Measured Distance</code> / <code>Telemetry Distance Traveled</code> . For example, if your telemetry reports 89 inches but your tape measure reports 90 inches, your multiplier will be <code>1.01123596</code>.</p></li> <li><p>I repeated this process 3 times for the forward direction to get the average multiplier. Then, set the <code>X_MULTIPLIER</code> to this value.</p></li> <li><p>Repeat the same process but in the strafing direction.</p></li> <li><p>Set <code>Y_MULTIPLIER</code> to the calculated strafe multiplier.</p></li></ol> <h3 id="tuning-the-lateral-distance"><a href="#tuning-the-lateral-distance" class="header-anchor">#</a> Tuning the lateral distance</h3> <p>It is very important to tune lateral distance properly. This determines the heading in your localization and you will find that errors in your heading will quickly compound and absolutely destroy your localization.</p> <ol><li><p>Make sure that the <code>LATERAL_DISTANCE</code> value in <code>StandardTrackingWheelLocalizer.java</code> is set to the physical measured value. This need only be an estimated value as you will be tuning it anyways.</p></li> <li><p>Make a mark on the bot (with a piece of tape or sharpie or however you wish) and make a similar mark right below the indicator on the bot. This will be your reference point to ensure you've turned exactly 360°. The bot should start and end with these marks lined up.</p> <ul><li>Rather than marking something on the bot, I personally lined up the straight edge of my chassis with the seam on my mats. This only applies if you have an adequate straight edge on your bot.</li></ul></li> <li><p>Run the <code>TrackingWheelLateralDistanceTuner</code> opmode.</p></li> <li><p>Although not entirely necessary, having the bot's pose being drawn in dashbooard does help identify discrepancies in the <code>LATERAL_DISTANCE</code> value. To access the dashboard, connect your computer to the RC's WiFi network. In your browser, navigate to <code>192.168.49.1:8080/dash</code> if you're using the RC phone or <code>192.168.43.1:8080/dash</code> if you are using the Control Hub. Ensure the field is showing (select the field view in top right of the page).</p></li> <li><p>Press play to begin the tuning routine.</p></li> <li><p>Use the right joystick on gamepad 1 to turn the bot <strong>counterclockwise</strong>.</p></li> <li><p>Spin the bot 10 times, <strong>counterclockwise</strong>. Make sure to keep track of these turns.</p></li> <li><p>Once the bot has finished spinning 10 times, press <code>Y</code> on the gamepad to finish the routine. The indicators on the bot and on the ground you created earlier should be lined up.</p></li> <li><p>Your effective <code>LATERAL_DISTANCE</code> will be printed. Stick this value into your <code>StandardTrackingWheelLocalizer.java</code> class.</p></li> <li><p>If this value is incorrect, run the routine again while adjusting the <code>LATERAL_DISTANCE</code> value yourself. Read the heading output and follow the advice stated in the note below to manually nudge the values yourself.</p></li></ol> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>It helps to pay attention to how the pose on the field is drawn in dashboard. A blue circle with a line from the circumference to the center should be present, representing the bot. The line indicates forward.</p> <p>If your <code>LATERAL_DISTANCE</code> value is tuned currently, the pose drawn in dashboard should keep track with the pose of your actual bot.</p> <ul><li><p>If the drawn bot turns <em>slower</em> than the actual bot, the <code>LATERAL_DISTANCE</code> should be <em>decreased</em>.</p></li> <li><p>If the drawn bot turns <em>faster</em> than the actual bot, the <code>LATERAL_DISTANCE</code> should be <em>increased</em>.</p></li></ul> <p>If your drawn bot oscillates around a point in dashboard, don't worry. This is because the position of the perpendicular wheel isn't perfectly set and causes a discrepancy in the effective center of rotation. You can ignore this effect. The center of rotation will be offset slightly but your heading will still be fine. This does not affect your overall tracking precision. The heading should still line up.</p></div> <h3 id="double-checking-2"><a href="#double-checking-2" class="header-anchor">#</a> Double Checking</h3> <p>We're going to double check that everything is hunky-dory with your localization.</p> <ol><li><p>Run the <code>LocalizationTest</code> opmode.</p></li> <li><p>Navigate to <code>192.168.49.1:8080/dash</code> with a phone RC or <code>192.168.43.1:8080/dash</code> with a Control Hub.</p></li> <li><p>Drive the bot around with your controller. You should see the bot being drawn on the graph in Dashboard. Make sure the drawn bot matches the movements of the actual bot.</p></li> <li><p>The x coordinates on your bot should be increasing as you move forward. The y coordinates should be increasing as you strafe left. See the <a href="/LearnRoadRunner/trajectories.html#coordinate-system">coordinate system page</a> for further details on why this is.</p></li> <li><p>Check the troubleshooting section below if you encounter any issues.</p></li></ol> <h2 id="troubleshooting"><a href="#troubleshooting" class="header-anchor">#</a> Troubleshooting</h2> <ul><li><p>Bot on the dashboard field strafes the opposite direction as the actual bot</p> <ul><li>Reverse the direction of the perpendicular encoder</li></ul></li> <li><p>Bot on the dashboard field doesn't spin in place properly</p> <ul><li>This is due to an offset center of rotation due to an incorrect perpendicular wheel placement. Tuning the position of your perpendicular wheel is a pain. It's fine to let this be a little inaccurate as an offset center of rotation will not affect the tracking accuracy. It will only introduce a little offset to your localization.</li></ul></li> <li><p>Bot on the dashboard field spins while the actual bot is going straight</p> <ul><li>One of your parallel encoders are reversed</li></ul></li> <li><p>Your bot on the dashboard field goes straight and strafes properly but turns the opposite way as the actual bot</p> <ul><li>Your left and right encoders are swapped</li></ul></li> <li><p>The localization loses accuracy over a time/distance</p> <ul><li>First, try driving your bot around slowly. Attempt to minimize acceleration.
<ul><li>Does the localization remain accurate? If not, go back and double check your other properties. Check if heading is accurate. Check if the distance traveled during strafe and forward movements are accurate.</li></ul></li> <li>If the localization is fairly accurate at slow speeds but loses accuracy at high speeds, you are experiencing a hardware related problem.</li> <li>The most likely issue is that your dead wheels do not have enough traction. Increase the spring force on your dead wheels.</li></ul></li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/NoahBres/LearnRoadRunner/edit/master/docs/dead-wheels.md" target="_blank" rel="noopener noreferrer">Edit this page on Github!</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">12/9/2023, 8:31:51 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/LearnRoadRunner/drive-constants.html" class="prev">
        Drive Constants
      </a></span> <span class="next"><a href="/LearnRoadRunner/feedforward-tuning.html">
        Feedforward Tuning
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/LearnRoadRunner/assets/js/app.70b0e82d.js" defer></script><script src="/LearnRoadRunner/assets/js/3.cb25a48f.js" defer></script><script src="/LearnRoadRunner/assets/js/43.ce0d1bfc.js" defer></script>
  </body>
</html>
