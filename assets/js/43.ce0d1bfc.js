(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{454:function(t,e,a){"use strict";a.r(e);var s=a(46),n=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"dead-wheels"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dead-wheels"}},[t._v("#")]),t._v(" Dead Wheels")]),t._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),a("p",[t._v("If you are not using dead wheels, skip this section.")])]),t._v(" "),a("figure",{attrs:{align:"center"}},[a("img",{attrs:{src:"https://cdn.statically.io/gh/NoahBres/LearnRoadRunner/1c0fe8d5/docs/assets/you-are-here/YouAreHere-DeadWheels-half.png",alt:"You are on the dead wheels step"}}),t._v(" "),a("figcaption",{staticClass:"mt-2 text-gray-600 text-center"},[t._v("You are here")])]),t._v(" "),a("p",[t._v("Your configuration will depend on whether you have two or three dead wheels. Don't know the difference? Check "),a("RouterLink",{attrs:{to:"/#what-is-the-difference-between-two-and-three-wheel-odometry"}},[t._v("the FAQ")]),t._v(".")],1),t._v(" "),a("p",[t._v("If you're using a two-wheel setup, read only the "),a("a",{attrs:{href:"#two-wheel-odometry"}},[t._v("two-wheel odometry section")]),t._v(".")]),t._v(" "),a("p",[t._v("If you're using a three-wheel setup, read only the "),a("a",{attrs:{href:"#three-wheel-odometry"}},[t._v("three-wheel odometry section")]),t._v(".")]),t._v(" "),a("h2",{attrs:{id:"two-wheel-odometry"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#two-wheel-odometry"}},[t._v("#")]),t._v(" Two-Wheel Odometry")]),t._v(" "),a("p",[t._v("If you opt for the two wheel configuration, you will be using a gyroscope of your choice as the source for your heading. By default, you will be using the REV Hub's internal BNO055 gyroscope.")]),t._v(" "),a("p",[t._v("Feel free to use your own gyroscope. Simply declare it in "),a("code",[t._v("SampleMecanumDrive.java")]),t._v(" and override the "),a("code",[t._v("getRawExternalHeading()")]),t._v(" function.")]),t._v(" "),a("p",[t._v("Download "),a("a",{attrs:{href:"https://github.com/NoahBres/road-runner-quickstart/blob/master/TeamCode/src/main/java/org/firstinspires/ftc/teamcode/drive/TwoWheelTrackingLocalizer.java",target:"_blank",rel:"noopener noreferrer"}},[t._v("this file"),a("OutboundLink")],1),t._v(" and stick it in your "),a("code",[t._v("TeamCode")]),t._v(" folder, preferably next to the "),a("code",[t._v("StandardTrackingWheelLocalizer.java")]),t._v(" file just for organizational purposes.")]),t._v(" "),a("p",[t._v("Open the "),a("code",[t._v("TwoWheelTrackingLocalizer.java")]),t._v(" file (that you just downloaded) to edit.")]),t._v(" "),a("h3",{attrs:{id:"ticks-per-rev-wheel-radius-gear-ratio"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ticks-per-rev-wheel-radius-gear-ratio"}},[t._v("#")]),t._v(" Ticks Per Rev/Wheel Radius/Gear Ratio")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* Lines 37-39 in TwoWheelTrackingLocalizer.java */")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("double")]),t._v(" TICKS_PER_REV "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("double")]),t._v(" WHEEL_RADIUS "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// in")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("double")]),t._v(" GEAR_RATIO "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// output (wheel) speed / input (encoder) speed")]),t._v("\n")])])]),a("p",[a("strong",[a("code",[t._v("TICKS_PER_REV")])]),t._v(' is the number of "ticks" the encoders will count per revolution. You will find the specs of your encoders on your manufacturer\'s site. Be sure to find the '),a("code",[t._v("Counts Per Revolution")]),t._v(" or "),a("code",[t._v("CPR")]),t._v(". The REV Through Bore Encoder has a "),a("code",[t._v("TICKS_PER_REV")]),t._v(" of "),a("code",[t._v("8192")]),t._v(".")]),t._v(" "),a("p",[a("strong",[a("code",[t._v("WHEEL_RADIUS")])]),t._v(" is the radius of the dead wheel. Make sure this is the radius, not diameter.")]),t._v(" "),a("p",[a("strong",[a("code",[t._v("GEAR_RATIO")])]),t._v(" is the ratio of the output (wheel) speed to input (encoder) speed. If you are not gearing your encoders, leave this at 1.")]),t._v(" "),a("h3",{attrs:{id:"parallel-perpendicular-x-y"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#parallel-perpendicular-x-y"}},[t._v("#")]),t._v(" Parallel/Perpendicular X/Y")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* Lines 41-45 in TwoWheelTrackingLocalizer.java */")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("double")]),t._v(" PARALLEL_X "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// X is the forward and back direction")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("double")]),t._v(" PARALLEL_Y "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Y is the strafe direction")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("double")]),t._v(" PERPENDICULAR_X "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// X is the forward and back direction")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("double")]),t._v(" PERPENDICULAR_Y "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Y is the strafe direction")]),t._v("\n")])])]),a("p",[t._v("Put in the X/Y coordinates of your perpendicular and parallel wheels. Remember that the X axis is the forward/back direction and the Y axis is the left/right direction. This is fairly standard for robotics/aviation/etc.")]),t._v(" "),a("figure",{attrs:{align:"center"}},[a("img",{staticClass:"rounded-lg",attrs:{src:"https://cdn.statically.io/gh/NoahBres/LearnRoadRunner/1c0fe8d5/docs/assets/dead-wheels/andrew-bot-wheel-location-quarter.jpg",alt:"Bottom view of the bot. The Y direction increase left to right. The X directions increases up."}}),t._v(" "),a("figcaption",{staticClass:"mt-2 text-sm text-gray-600 text-center"},[t._v("17508 Rising Tau's 2019/20 Skystone Bot")])]),t._v(" "),a("h3",{attrs:{id:"encoder-directions"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#encoder-directions"}},[t._v("#")]),t._v(" Encoder Directions")]),t._v(" "),a("p",[t._v("Make sure to reverse the encoder directions when appropriate.")]),t._v(" "),a("p",[t._v("E.g.")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("br")]),a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* Lines 60-63~ in TwoWheelTrackingLocalizer.java */")]),t._v("\nparallelEncoder "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Encoder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("hardwareMap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DcMotorEx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"parallelEncoder"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nperpendicularEncoder "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Encoder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("hardwareMap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DcMotorEx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"perpendicularEncoder"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// TODO: reverse any encoders using Encoder.setDirection(Encoder.Direction.REVERSE)")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// If you need to reverse the perpendicular encoder:")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Vice-versa for the other encoder")]),t._v("\nperpendicularEncoder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setDirection")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Encoder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Direction")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("REVERSE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("div",{staticClass:"custom-block danger"},[a("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),a("p",[t._v("If you are using the Rev Through Bore encoders, please read the following section")])]),t._v(" "),a("p",[t._v("If your encoder velocity exceeds 32767 counts per second, it will cause an integer overflow when calling "),a("code",[t._v("getVelocity()")]),t._v(". This is because the Rev Hub firmware sends the velocity data using 16 bit signed integers rather than 32 bit. Due to the Rev Through Bore encoders' absurdly high CPR, this happens at around 4 rounds per second. Or only 25 inches per second with 2 inch diameter wheels.")]),t._v(" "),a("p",[t._v("Change the "),a("code",[t._v("getRawVelocity()")]),t._v(" functions to "),a("code",[t._v("getCorrectedVelocity()")]),t._v(" in the "),a("code",[t._v("getWheelVelocities()")]),t._v(" function to fix this integer overflow:")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("br"),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* Lines 86-95 in TwoWheelLocalizer.java */")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Double")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getWheelVelocities")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// TODO: If your encoder velocity can exceed 32767 counts / second (such as the REV Through Bore and other")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//  competing magnetic encoders), change Encoder.getRawVelocity() to Encoder.getCorrectedVelocity() to enable a")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//  compensation method")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Arrays")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("asList")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("encoderTicksToInches")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("parallelEncoder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCorrectedVelocity")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("encoderTicksToInches")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("perpendicularEncoder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCorrectedVelocity")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"hardware-id-s"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hardware-id-s"}},[t._v("#")]),t._v(" Hardware ID's")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* Lines 60-61 in TwoWheelTrackingLocalizer.java */")]),t._v("\nparallelEncoder "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Encoder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("hardwareMap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DcMotorEx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"parallelEncoder"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nperpendicularEncoder "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Encoder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("hardwareMap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DcMotorEx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"perpendicularEncoder"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("Ensure that these ID's match up with your Rev Hub config ID's.")]),t._v(" "),a("h3",{attrs:{id:"imu"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#imu"}},[t._v("#")]),t._v(" IMU")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* Lines 134-137 in SampleMecanumDrive.java */")]),t._v("\nimu "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" hardwareMap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("BNO055IMU"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"imu"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BNO055IMU"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Parameters")]),t._v(" parameters "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BNO055IMU"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Parameters")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nparameters"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("angleUnit "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BNO055IMU"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("AngleUnit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("RADIANS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nimu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("initialize")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("parameters"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("Ensure that the IMU is initialitzed in the "),a("code",[t._v("SampleMecanumDrive.java")]),t._v(" class. You shouldn't need to change anything if you downloaded the quickstart and are using the Rev Hub IMU. This section should be changed if you are using your own external gyro.")]),t._v(" "),a("h3",{attrs:{id:"imu-velocity-axis"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#imu-velocity-axis"}},[t._v("#")]),t._v(" IMU Velocity Axis")]),t._v(" "),a("p",[t._v("In your "),a("code",[t._v("SampleMecanumDrive.java")]),t._v(" file, scroll to the very bottom to find the "),a("code",[t._v("getExternalHeadingVelocity")]),t._v(" function. Ensure that the function returns the axis that your IMU rotates about for your configuration. Consult the ASCII diagram provided in the file for a visual on which axis you should choose. If your REV Hub is mounted flat, the bot will rotate about the Z axis. If it is on its side with the motor ports facing up or down, the robot will rotate about the Y axis. If the servo ports are facing up or down, the bot will rotate about the x axis.")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* About lines 399-419 in SampleMecanumDrive.java */")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Double")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getExternalHeadingVelocity")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// TODO: This must be changed to match your configuration")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//                           | Z axis")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//                           |")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//     (Motor Port Side)     |   / X axis")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//                       ____|__/____")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//          Y axis     / *   | /    /|   (IO Side)")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//          _________ /______|/    //      I2C")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//                   /___________ //     Digital")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//                  |____________|/      Analog")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//                 (Servo Port Side)")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// The positive x axis points toward the USB port(s)")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Adjust the axis rotation rate as necessary")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Rotate about the z axis is the default assuming your REV Hub/Control Hub is laying")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// flat on a surface")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("double")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" imu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getAngularVelocity")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("zRotationRate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"set-localizer-in-samplemecanumdrive"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#set-localizer-in-samplemecanumdrive"}},[t._v("#")]),t._v(" Set Localizer in SampleMecanumDrive")]),t._v(" "),a("p",[t._v("After you've configured your localizer, go back to the "),a("code",[t._v("SampleMecanumDrive.java")]),t._v(" file.")]),t._v(" "),a("p",[t._v('Look at about line 168. You should find a comment stating "'),a("code",[t._v("// TODO: if desired, use setLocalizer() to change the localization method")]),t._v('"')]),t._v(" "),a("p",[t._v("Under this comment, add the following line:")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("br")]),a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* About line 168 in SampleMecanumDrive.java */")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// TODO: if desired, use setLocalizer() to change the localization method")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// for instance, setLocalizer(new ThreeTrackingWheelLocalizer(...));")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setLocalizer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TwoWheelTrackingLocalizer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("hardwareMap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("You have set the localizer!")]),t._v(" "),a("div",{staticClass:"h-16"}),t._v(" "),a("h2",{attrs:{id:"three-wheel-odometry"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#three-wheel-odometry"}},[t._v("#")]),t._v(" Three-Wheel Odometry")]),t._v(" "),a("p",[t._v("If you opt for the three wheel configuration, you will be using the two parallel wheels as the source for your heading.")]),t._v(" "),a("p",[t._v("Open up the "),a("code",[t._v("StandardTrackingWheelLocalizer.java")]),t._v(" file.")]),t._v(" "),a("h3",{attrs:{id:"ticks-per-rev-wheel-radius-gear-ratio-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ticks-per-rev-wheel-radius-gear-ratio-2"}},[t._v("#")]),t._v(" Ticks Per Rev/Wheel Radius/Gear Ratio")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* Lines 30-32 in StandardTrackingWheelLocalizer.java */")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("double")]),t._v(" TICKS_PER_REV "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("double")]),t._v(" WHEEL_RADIUS "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// in")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("double")]),t._v(" GEAR_RATIO "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// output (wheel) speed / input (encoder) speed")]),t._v("\n")])])]),a("p",[a("strong",[a("code",[t._v("TICKS_PER_REV")])]),t._v(' is the number of "ticks" the encoders will count per revolution. You will find the specs of your encoders on your manufacturer\'s site. Be sure to find the '),a("code",[t._v("Counts Per Revolution")]),t._v(" or "),a("code",[t._v("CPR")]),t._v(". The REV Through Bore Encoder has a "),a("code",[t._v("TICKS_PER_REV")]),t._v(" of "),a("code",[t._v("8192")]),t._v(".")]),t._v(" "),a("p",[a("strong",[a("code",[t._v("WHEEL_RADIUS")])]),t._v(" is the radius of the dead wheel. Make sure this is the radius, not diameter.")]),t._v(" "),a("p",[a("strong",[a("code",[t._v("GEAR_RATIO")])]),t._v(" is the ratio of the output (wheel) speed to input (encoder) speed. If you are not gearing your encoders, leave this at 1.")]),t._v(" "),a("h3",{attrs:{id:"lateral-distance-forward-offset"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#lateral-distance-forward-offset"}},[t._v("#")]),t._v(" Lateral Distance/Forward Offset")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* Lines 34-35 in StandardTrackingWheelLocalizer.java */")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("double")]),t._v(" LATERAL_DISTANCE "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// in; distance between the left and right wheels")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("double")]),t._v(" FORWARD_OFFSET "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// in; offset of the lateral wheel")]),t._v("\n")])])]),a("p",[a("strong",[a("code",[t._v("LATERAL_DISTANCE")])]),t._v(" is the distance from the left and right wheels.")]),t._v(" "),a("p",[a("strong",[a("code",[t._v("FORWARD_OFFSET")])]),t._v(" is the distance from the center of rotation to the middle wheel. The "),a("code",[t._v("FORWARD_OFFSET")]),t._v(" is positive when in front of the wheels and negative when behind the wheels (closer to the back).")]),t._v(" "),a("figure",{attrs:{align:"center"}},[a("img",{staticClass:"rounded-lg",attrs:{src:"https://cdn.statically.io/gh/NoahBres/LearnRoadRunner/1c0fe8d5/docs/assets/dead-wheels/andrew-bot-forward-offset-quarter.jpg",alt:"Bottom view of the bot. The Y direction increase left to right. The X directions increases up."}}),t._v(" "),a("figcaption",{staticClass:"mt-2 text-sm text-gray-600 text-center"},[t._v("17508 Rising Tau's 2019/20 Skystone Bot")])]),t._v(" "),a("h3",{attrs:{id:"encoder-directions-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#encoder-directions-2"}},[t._v("#")]),t._v(" Encoder Directions")]),t._v(" "),a("p",[t._v("Make sure to reverse the encoder directions when appropriate.")]),t._v(" "),a("p",[t._v("E.g.")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("br")]),a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* Lines 46-63~ in StandardTrackingWheelLocalizer.java */")]),t._v("\nleftEncoder "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Encoder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("hardwareMap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DcMotorEx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"leftEncoder"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nrightEncoder "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Encoder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("hardwareMap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DcMotorEx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"rightEncoder"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nfrontEncoder "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Encoder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("hardwareMap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DcMotorEx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"frontEncoder"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// TODO: reverse any encoders using Encoder.setDirection(Encoder.Direction.REVERSE)")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// If you need to reverse the middle encoder:")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Vice-versa for the other encoders")]),t._v("\nfrontEncoder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setDirection")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Encoder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Direction")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("REVERSE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"set-localizer-in-samplemecanumdrive-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#set-localizer-in-samplemecanumdrive-2"}},[t._v("#")]),t._v(" Set Localizer in SampleMecanumDrive")]),t._v(" "),a("p",[t._v("After you've configured your localizer, go back to the "),a("code",[t._v("SampleMecanumDrive.java")]),t._v(" file.")]),t._v(" "),a("p",[t._v('Look at about line 131. You should find a comment stating "'),a("code",[t._v("// TODO: if desired, use setLocalizer() to change the localization method")]),t._v('"')]),t._v(" "),a("p",[t._v("Under this comment, add the following line:")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("br")]),a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* About line 131 in SampleMecanumDrive.java */")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// TODO: if desired, use setLocalizer() to change the localization method")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// for instance, setLocalizer(new ThreeTrackingWheelLocalizer(...));")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setLocalizer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StandardTrackingWheelLocalizer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("hardwareMap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("You have set the localizer!")]),t._v(" "),a("h3",{attrs:{id:"deleting-the-imu"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deleting-the-imu"}},[t._v("#")]),t._v(" Deleting the IMU")]),t._v(" "),a("p",[t._v("The IMU does not serve a purpose in three wheel odometry. Thus, it would be ideal to get rid of the default initialization in "),a("code",[t._v("SampleMecanumDrive")]),t._v(". IMU initialization can add 2-3 seconds to the opmode initialization and it's quite annoying.")]),t._v(" "),a("p",[t._v("Open "),a("code",[t._v("SampleMecanumDrive.java")]),t._v(" and delete this entire section:")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* Lines 134-137 in SampleMecanumDrive.java */")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// TODO: adjust the names of the following hardware devices to match your configuration")]),t._v("\nimu "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" hardwareMap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("BNO055IMU"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"imu"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BNO055IMU"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Parameters")]),t._v(" parameters "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BNO055IMU"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Parameters")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nparameters"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("angleUnit "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BNO055IMU"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("AngleUnit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("RADIANS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nimu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("initialize")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("parameters"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("Just for safety reasons, replace the returns of "),a("code",[t._v("getRawExternalHeading()")]),t._v(" and "),a("code",[t._v("getExternalHeadingVelocity()")]),t._v(" with zero:")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* Lines 393-396 in SampleMecanumDrive.java */")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("double")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getRawExternalHeading")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Double")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getExternalHeadingVelocity")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("div",{staticClass:"h-16"}),t._v(" "),a("h2",{attrs:{id:"tuning-two-wheel"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tuning-two-wheel"}},[t._v("#")]),t._v(" Tuning - Two-Wheel")]),t._v(" "),a("p",[t._v("Tuning your dead wheels is one of the most important steps along the entire tuning process. This is not constrained to Road Runner. Any time you choose to use dead wheels, whether it be in Road Runner, FTCLib, or your own home brew path following, your localization should be as accurate as possible.")]),t._v(" "),a("h3",{attrs:{id:"adjusting-the-wheel-radius"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#adjusting-the-wheel-radius"}},[t._v("#")]),t._v(" Adjusting the wheel radius")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("This isn't quite necessary for everyone. You may choose to skip over this section. However, I did find that this process would increase localization accuracy by an additional 1% or so. 1% may not sound like much but over 100 inches that is an entire inch. During the FTC Skystone (2019-2020) season, a 4-5 stone autonomous programmed traveled well over 100 inches and an entire inch of extra accuracy may have made a big difference.")])]),t._v(" "),a("ol",[a("li",[t._v("First, open up the "),a("code",[t._v("TwoWheelTrackingLocalizer.java")])]),t._v(" "),a("li",[t._v("Declare two variables, "),a("code",[t._v("X_MULTIPLIER")]),t._v(" and "),a("code",[t._v("Y_MULTIPLIER")]),t._v(", in your class:")])]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* Lines 46-47 in TwoWheelTrackingLocalizer.java */")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("double")]),t._v(" X_MULTIPLIER "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Multiplier in the X direction")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("double")]),t._v(" Y_MULTIPLIER "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Multiplier in the Y direction")]),t._v("\n")])])]),a("p",[t._v("A finished example of where these go may be found "),a("a",{attrs:{href:"https://gist.github.com/NoahBres/02e83f8317f34d7b627170c2031b2ebf",target:"_blank",rel:"noopener noreferrer"}},[t._v("here"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[t._v("Add these mulitpliers to the "),a("code",[t._v("getWheelPositions()")]),t._v(" and "),a("code",[t._v("getWheelVelocities()")]),t._v(" functions like so:")])]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("br"),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* Lines 77-97 in TwoWheelTrackingLocalizer.java */")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@NonNull")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Double")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getWheelPositions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Arrays")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("asList")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("encoderTicksToInches")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("parallelEncoder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCurrentPosition")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" X_MULTIPLIER"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("encoderTicksToInches")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("perpendicularEncoder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCurrentPosition")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" Y_MULTIPLIER\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@NonNull")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Double")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getWheelVelocities")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// TODO: If your encoder velocity can exceed 32767 counts / second (such as the REV Through Bore and other")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//  competing magnetic encoders), change Encoder.getRawVelocity() to Encoder.getCorrectedVelocity() to enable a")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//  compensation method")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Arrays")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("asList")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("encoderTicksToInches")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("parallelEncoder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getRawVelocity")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" X_MULTIPLIER"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("encoderTicksToInches")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("perpendicularEncoder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getRawVelocity")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" Y_MULTIPLIER\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("Remember that the X multiplier is on the parallel encoder because x faces forward for a local coordinate frame (common for robotics/aviation/etc situations).")]),t._v(" "),a("ol",{attrs:{start:"4"}},[a("li",[a("p",[t._v("You will begin the physical tuning process. Clear a straight line for your bot to travel in. I used a 90 inch stretch of field tiles.")])]),t._v(" "),a("li",[a("p",[t._v("Set your bot at the beginning of this stretch, facing forward.")])]),t._v(" "),a("li",[a("p",[t._v("Run the "),a("code",[t._v("LocalizationTest")]),t._v(" opmode. Do not touch the controller.")])]),t._v(" "),a("li",[a("p",[t._v("Slowly drag your bot along this stretch. Keep the bot as straight as possible. I set a measuring tape below the entire stretch and kept the wheels as parallel as possible to this measuring tape.")])]),t._v(" "),a("li",[a("p",[t._v("Once you reach the end of your stretch, stop. Measure the distance traveled. Then look at the distance reported on the telemetry on the RC.")])]),t._v(" "),a("li",[a("p",[t._v("Your multiplier will be the "),a("code",[t._v("Measured Distance")]),t._v(" / "),a("code",[t._v("Telemetry Distance Traveled")]),t._v(" . For example, if your telemetry reports 89 inches but your tape measure reports 90 inches, your multiplier will be "),a("code",[t._v("1.01123596")]),t._v(".")])]),t._v(" "),a("li",[a("p",[t._v("I repeated this process 3 times for the forward direction to get the average multiplier. Then, set the "),a("code",[t._v("X_MULTIPLIER")]),t._v(" to this value.")])]),t._v(" "),a("li",[a("p",[t._v("Repeat the same process but in the strafing direction.")])]),t._v(" "),a("li",[a("p",[t._v("Set "),a("code",[t._v("Y_MULTIPLIER")]),t._v(" to the calculated strafe multiplier.")])])]),t._v(" "),a("h3",{attrs:{id:"double-checking"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#double-checking"}},[t._v("#")]),t._v(" Double Checking")]),t._v(" "),a("p",[t._v("We're going to double check that everything is hunky-dory with your localization.")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("Run the "),a("code",[t._v("LocalizationTest")]),t._v(" opmode.")])]),t._v(" "),a("li",[a("p",[t._v("Navigate to "),a("code",[t._v("192.168.49.1:8080/dash")]),t._v(" with a phone RC or "),a("code",[t._v("192.168.43.1:8080/dash")]),t._v(" with a Control Hub.")])]),t._v(" "),a("li",[a("p",[t._v("Drive the bot around with your controller. You should see the bot being drawn on the graph in Dashboard. Make sure the drawn bot matches the movements of the actual bot.")])]),t._v(" "),a("li",[a("p",[t._v("The x coordinates on your bot should be increasing as you move forward. The y coordinates should be increasing as you strafe left. See the "),a("RouterLink",{attrs:{to:"/trajectories.html#coordinate-system"}},[t._v("coordinate system page")]),t._v(" for further details on why this is.")],1)]),t._v(" "),a("li",[a("p",[t._v("Check the troubleshooting section below if you encounter any issues.")])])]),t._v(" "),a("div",{staticClass:"h-16"}),t._v(" "),a("h2",{attrs:{id:"tuning-three-wheel"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tuning-three-wheel"}},[t._v("#")]),t._v(" Tuning - Three-Wheel")]),t._v(" "),a("p",[t._v("Tuning your dead wheels is one of the most important steps along the entire tuning process. This is not constrained to Road Runner. Any time you choose to use dead wheels, whether it be in Road Runner, FTCLib, or your own home brew path following, your localization should be as accurate as possible.")]),t._v(" "),a("h3",{attrs:{id:"adjusting-the-wheel-radius-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#adjusting-the-wheel-radius-2"}},[t._v("#")]),t._v(" Adjusting the wheel radius")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("This isn't quite necessary for everyone. You may choose to skip over this section. However, I did find that this process would increase localization accuracy by an additional 1% or so. 1% may not sound like much but over 100 inches that is an entire inch. During the FTC Skystone (2019-2020) season, a 4-5 stone autonomous programmed traveled well over 100 inches and an entire inch of extra accuracy may have made a big difference.")])]),t._v(" "),a("ol",[a("li",[t._v("First, open up the "),a("code",[t._v("StandardTrackingWheelLocalizer.java")])]),t._v(" "),a("li",[t._v("Declare two variables, "),a("code",[t._v("X_MULTIPLIER")]),t._v(" and "),a("code",[t._v("Y_MULTIPLIER")]),t._v(", in your class:")])]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* Lines 37-38 in StandardTrackingWheelLocalizer.java */")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("double")]),t._v(" X_MULTIPLIER "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Multiplier in the X direction")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("double")]),t._v(" Y_MULTIPLIER "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Multiplier in the Y direction")]),t._v("\n")])])]),a("p",[t._v("A finished example of where these go may be found "),a("a",{attrs:{href:"https://gist.github.com/NoahBres/9b9710eaa9f9fd23efa30a16de0f610e",target:"_blank",rel:"noopener noreferrer"}},[t._v("here"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[t._v("Add these mulitpliers to the "),a("code",[t._v("getWheelPositions()")]),t._v(" and "),a("code",[t._v("getWheelVelocities()")]),t._v(" functions like so:")])]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("br"),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* About Lines 67-103 in StandardTrackingWheelLocalizer.java */")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@NonNull")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Double")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getWheelPositions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" leftPos "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" leftEncoder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCurrentPosition")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" rightPos "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" rightEncoder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCurrentPosition")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" frontPos "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" frontEncoder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCurrentPosition")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    lastEncPositions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("clear")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    lastEncPositions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("leftPos"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    lastEncPositions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("rightPos"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    lastEncPositions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("frontPos"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Arrays")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("asList")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("encoderTicksToInches")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("leftPos"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" X_MULTIPLIER"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("encoderTicksToInches")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("rightPos"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" X_MULTIPLIER"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("encoderTicksToInches")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("frontPos"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" Y_MULTIPLIER\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@NonNull")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Double")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getWheelVelocities")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" leftVel "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" leftEncoder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCorrectedVelocity")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" rightVel "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" rightEncoder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCorrectedVelocity")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" frontVel "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" frontEncoder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCorrectedVelocity")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    lastEncVels"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("clear")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    lastEncVels"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("leftVel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    lastEncVels"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("rightVel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    lastEncVels"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("frontVel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Arrays")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("asList")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("encoderTicksToInches")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("leftVel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" X_MULTIPLIER"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("encoderTicksToInches")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("rightVel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" X_MULTIPLIER"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("encoderTicksToInches")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("frontVel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" Y_MULTIPLIER\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("Remember that the X multiplier is on the left/right because x faces forward for a local coordinate frame (common for robotics/aviation/etc situations).")]),t._v(" "),a("ol",{attrs:{start:"4"}},[a("li",[a("p",[t._v("You will begin the physical tuning process. Clear a straight line for your bot to travel in. I used a 90 inch stretch of field tiles.")])]),t._v(" "),a("li",[a("p",[t._v("Set your bot at the beginning of this stretch, facing forward.")])]),t._v(" "),a("li",[a("p",[t._v("Run the "),a("code",[t._v("LocalizationTest")]),t._v(" opmode. Do not touch the controller.")])]),t._v(" "),a("li",[a("p",[t._v("Slowly drag your bot along this stretch. Keep the bot as straight as possible. I set a measuring tape below the entire stretch and kept the wheels as parallel as possible to this measuring tape.")])]),t._v(" "),a("li",[a("p",[t._v("Once you reach the end of your stretch, stop. Measure the distance traveled. Then look at the distance reported on the telemetry on the RC.")])]),t._v(" "),a("li",[a("p",[t._v("Your multiplier will be the "),a("code",[t._v("Measured Distance")]),t._v(" / "),a("code",[t._v("Telemetry Distance Traveled")]),t._v(" . For example, if your telemetry reports 89 inches but your tape measure reports 90 inches, your multiplier will be "),a("code",[t._v("1.01123596")]),t._v(".")])]),t._v(" "),a("li",[a("p",[t._v("I repeated this process 3 times for the forward direction to get the average multiplier. Then, set the "),a("code",[t._v("X_MULTIPLIER")]),t._v(" to this value.")])]),t._v(" "),a("li",[a("p",[t._v("Repeat the same process but in the strafing direction.")])]),t._v(" "),a("li",[a("p",[t._v("Set "),a("code",[t._v("Y_MULTIPLIER")]),t._v(" to the calculated strafe multiplier.")])])]),t._v(" "),a("h3",{attrs:{id:"tuning-the-lateral-distance"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tuning-the-lateral-distance"}},[t._v("#")]),t._v(" Tuning the lateral distance")]),t._v(" "),a("p",[t._v("It is very important to tune lateral distance properly. This determines the heading in your localization and you will find that errors in your heading will quickly compound and absolutely destroy your localization.")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("Make sure that the "),a("code",[t._v("LATERAL_DISTANCE")]),t._v(" value in "),a("code",[t._v("StandardTrackingWheelLocalizer.java")]),t._v(" is set to the physical measured value. This need only be an estimated value as you will be tuning it anyways.")])]),t._v(" "),a("li",[a("p",[t._v("Make a mark on the bot (with a piece of tape or sharpie or however you wish) and make a similar mark right below the indicator on the bot. This will be your reference point to ensure you've turned exactly 360°. The bot should start and end with these marks lined up.")]),t._v(" "),a("ul",[a("li",[t._v("Rather than marking something on the bot, I personally lined up the straight edge of my chassis with the seam on my mats. This only applies if you have an adequate straight edge on your bot.")])])]),t._v(" "),a("li",[a("p",[t._v("Run the "),a("code",[t._v("TrackingWheelLateralDistanceTuner")]),t._v(" opmode.")])]),t._v(" "),a("li",[a("p",[t._v("Although not entirely necessary, having the bot's pose being drawn in dashbooard does help identify discrepancies in the "),a("code",[t._v("LATERAL_DISTANCE")]),t._v(" value. To access the dashboard, connect your computer to the RC's WiFi network. In your browser, navigate to "),a("code",[t._v("192.168.49.1:8080/dash")]),t._v(" if you're using the RC phone or "),a("code",[t._v("192.168.43.1:8080/dash")]),t._v(" if you are using the Control Hub. Ensure the field is showing (select the field view in top right of the page).")])]),t._v(" "),a("li",[a("p",[t._v("Press play to begin the tuning routine.")])]),t._v(" "),a("li",[a("p",[t._v("Use the right joystick on gamepad 1 to turn the bot "),a("strong",[t._v("counterclockwise")]),t._v(".")])]),t._v(" "),a("li",[a("p",[t._v("Spin the bot 10 times, "),a("strong",[t._v("counterclockwise")]),t._v(". Make sure to keep track of these turns.")])]),t._v(" "),a("li",[a("p",[t._v("Once the bot has finished spinning 10 times, press "),a("code",[t._v("Y")]),t._v(" on the gamepad to finish the routine. The indicators on the bot and on the ground you created earlier should be lined up.")])]),t._v(" "),a("li",[a("p",[t._v("Your effective "),a("code",[t._v("LATERAL_DISTANCE")]),t._v(" will be printed. Stick this value into your "),a("code",[t._v("StandardTrackingWheelLocalizer.java")]),t._v(" class.")])]),t._v(" "),a("li",[a("p",[t._v("If this value is incorrect, run the routine again while adjusting the "),a("code",[t._v("LATERAL_DISTANCE")]),t._v(" value yourself. Read the heading output and follow the advice stated in the note below to manually nudge the values yourself.")])])]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("It helps to pay attention to how the pose on the field is drawn in dashboard. A blue circle with a line from the circumference to the center should be present, representing the bot. The line indicates forward.")]),t._v(" "),a("p",[t._v("If your "),a("code",[t._v("LATERAL_DISTANCE")]),t._v(" value is tuned currently, the pose drawn in dashboard should keep track with the pose of your actual bot.")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("If the drawn bot turns "),a("em",[t._v("slower")]),t._v(" than the actual bot, the "),a("code",[t._v("LATERAL_DISTANCE")]),t._v(" should be "),a("em",[t._v("decreased")]),t._v(".")])]),t._v(" "),a("li",[a("p",[t._v("If the drawn bot turns "),a("em",[t._v("faster")]),t._v(" than the actual bot, the "),a("code",[t._v("LATERAL_DISTANCE")]),t._v(" should be "),a("em",[t._v("increased")]),t._v(".")])])]),t._v(" "),a("p",[t._v("If your drawn bot oscillates around a point in dashboard, don't worry. This is because the position of the perpendicular wheel isn't perfectly set and causes a discrepancy in the effective center of rotation. You can ignore this effect. The center of rotation will be offset slightly but your heading will still be fine. This does not affect your overall tracking precision. The heading should still line up.")])]),t._v(" "),a("h3",{attrs:{id:"double-checking-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#double-checking-2"}},[t._v("#")]),t._v(" Double Checking")]),t._v(" "),a("p",[t._v("We're going to double check that everything is hunky-dory with your localization.")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("Run the "),a("code",[t._v("LocalizationTest")]),t._v(" opmode.")])]),t._v(" "),a("li",[a("p",[t._v("Navigate to "),a("code",[t._v("192.168.49.1:8080/dash")]),t._v(" with a phone RC or "),a("code",[t._v("192.168.43.1:8080/dash")]),t._v(" with a Control Hub.")])]),t._v(" "),a("li",[a("p",[t._v("Drive the bot around with your controller. You should see the bot being drawn on the graph in Dashboard. Make sure the drawn bot matches the movements of the actual bot.")])]),t._v(" "),a("li",[a("p",[t._v("The x coordinates on your bot should be increasing as you move forward. The y coordinates should be increasing as you strafe left. See the "),a("RouterLink",{attrs:{to:"/trajectories.html#coordinate-system"}},[t._v("coordinate system page")]),t._v(" for further details on why this is.")],1)]),t._v(" "),a("li",[a("p",[t._v("Check the troubleshooting section below if you encounter any issues.")])])]),t._v(" "),a("h2",{attrs:{id:"troubleshooting"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#troubleshooting"}},[t._v("#")]),t._v(" Troubleshooting")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("Bot on the dashboard field strafes the opposite direction as the actual bot")]),t._v(" "),a("ul",[a("li",[t._v("Reverse the direction of the perpendicular encoder")])])]),t._v(" "),a("li",[a("p",[t._v("Bot on the dashboard field doesn't spin in place properly")]),t._v(" "),a("ul",[a("li",[t._v("This is due to an offset center of rotation due to an incorrect perpendicular wheel placement. Tuning the position of your perpendicular wheel is a pain. It's fine to let this be a little inaccurate as an offset center of rotation will not affect the tracking accuracy. It will only introduce a little offset to your localization.")])])]),t._v(" "),a("li",[a("p",[t._v("Bot on the dashboard field spins while the actual bot is going straight")]),t._v(" "),a("ul",[a("li",[t._v("One of your parallel encoders are reversed")])])]),t._v(" "),a("li",[a("p",[t._v("Your bot on the dashboard field goes straight and strafes properly but turns the opposite way as the actual bot")]),t._v(" "),a("ul",[a("li",[t._v("Your left and right encoders are swapped")])])]),t._v(" "),a("li",[a("p",[t._v("The localization loses accuracy over a time/distance")]),t._v(" "),a("ul",[a("li",[t._v("First, try driving your bot around slowly. Attempt to minimize acceleration.\n"),a("ul",[a("li",[t._v("Does the localization remain accurate? If not, go back and double check your other properties. Check if heading is accurate. Check if the distance traveled during strafe and forward movements are accurate.")])])]),t._v(" "),a("li",[t._v("If the localization is fairly accurate at slow speeds but loses accuracy at high speeds, you are experiencing a hardware related problem.")]),t._v(" "),a("li",[t._v("The most likely issue is that your dead wheels do not have enough traction. Increase the spring force on your dead wheels.")])])])])])}),[],!1,null,null,null);e.default=n.exports}}]);