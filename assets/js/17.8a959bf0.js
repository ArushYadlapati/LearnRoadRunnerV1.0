(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{354:function(t,e,a){},417:function(t,e,a){"use strict";a(354)},441:function(t,e,a){"use strict";a.r(e);var s,i=a(0),r=a(351);!function(t){t[t.Accel=0]="Accel",t[t.Coast=1]="Coast",t[t.Decel=2]="Decel"}(s||(s={}));var o=i.a.extend({props:{graphHeight:{type:String,default:"30rem"}},computed:{uuid:()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{let e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)})},data:()=>({graphData:[[],[],[]],plot:null,resizeObserver:null,paddingX:-0,paddingY:-40,maxDataLength:200,maxVel:50,maxAccel:50,coastingLength:1e3,maxVelPadding:20,targetVelocity:0,startTime:0,lastLoopTime:0,coastStart:0,currentVelocity:0,lastVelocityReading:0,setVoltage:0,kV:0,kA:0,kS:0,arbitraryScaling:24,modelKV:.0153,modelKA:.002,modelKStatic:.0021,lastState:s.Accel,currentState:s.Accel}),mounted(){let t={title:"",width:this.$refs.canvas.clientWidth+this.paddingX,height:this.$refs.canvas.clientHeight+this.paddingY,series:[{label:"time"},{label:"targetVelocity",scale:"%",width:2,stroke:"green"},{label:"velocity0",scale:"%",width:2,stroke:"red"}],scales:{x:{time:!1},"%":{auto:!1,range:(t,e)=>[-this.maxVel-this.maxVelPadding,this.maxVel+this.maxVelPadding]}},axes:[{label:"time elapsed (seconds)"},{scale:"%",label:"velocity (inches per second)"}],cursor:{drag:{setScale:!1,x:!1,y:!1}}};this.startTime=performance.now(),this.loop(),this.plot=new r.a(t,JSON.parse(JSON.stringify(this.graphData)),this.$refs.canvas),this.resizeObserver=new ResizeObserver(t=>{for(let e of t)e.target==this.$refs.canvas&&this.plot.setSize({width:e.contentRect.width+this.paddingX,height:e.contentRect.height+this.paddingY})}),this.resizeObserver.observe(this.$refs.canvas)},beforeDestroy(){this.resizeObserver.disconnect()},methods:{loop(){const t=performance.now();this.graphData[0].push((t-this.startTime)/1e3);const e=(t-this.lastLoopTime)/1e3;switch(this.currentState){case s.Accel:this.targetVelocity=Math.min(this.targetVelocity+this.maxAccel*e,this.maxVel),this.targetVelocity>=this.maxVel&&(this.coastStart=t,this.lastState=s.Accel,this.currentState=s.Coast),this.graphData[1].push(this.targetVelocity);break;case s.Coast:t-this.coastStart>=this.coastingLength&&(this.lastState==s.Accel?this.currentState=s.Decel:this.lastState==s.Decel&&(this.currentState=s.Accel),this.lastState=s.Coast),this.graphData[1].push(this.targetVelocity);break;case s.Decel:this.targetVelocity=Math.max(this.targetVelocity-this.maxAccel*e,-this.maxVel),this.targetVelocity<=-this.maxVel&&(this.coastStart=t,this.lastState=s.Decel,this.currentState=s.Coast),this.graphData[1].push(this.targetVelocity)}this.currentVelocity+=(-this.modelKV/this.modelKA*this.currentVelocity+1/this.modelKA*this.setVoltage)*e,this.setVoltage=this.kV*this.targetVelocity+this.kA*((this.currentVelocity-this.lastVelocityReading)/e)+this.kS*(0==this.kS?1:this.kS/Math.abs(this.kS)),this.graphData[2].push(this.currentVelocity),this.graphData[0].length>this.maxDataLength&&(this.graphData[0].shift(),this.graphData[1].shift(),this.graphData[2].shift()),null!=this.plot&&this.plot.setData(this.graphData),this.lastLoopTime=t,this.lastVelocityReading=this.currentVelocity,setTimeout(this.loop,1e3/24+50*Math.random())},reset(){this.graphData[0]=[],this.graphData[1]=[],this.graphData[2]=[],this.startTime=performance.now(),this.currentVelocity=0,this.targetVelocity=0,this.currentState=s.Accel}}}),l=(a(352),a(417),a(46)),n=Object(l.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tuning-simulator border-gray-500 border rounded-lg overflow-hidden"},[a("div",{ref:"canvas",staticClass:"bg-gray-100",staticStyle:{"box-shadow":"rgba(0, 0, 0, 0.1) 0px 2px 6px 2px inset"},style:{height:t.graphHeight}}),t._v(" "),a("div",{staticClass:"bg-gray-200 rounded-b-lg px-4 py-3 border-t border-gray-400 grid grid-cols-3 gap-2"},[a("div",{staticClass:"flex flex-col items-center"},[a("label",{staticClass:"mb-1 ml-1",attrs:{for:"kv-input-"+t.uuid}},[t._v("kV")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.kV,expression:"kV",modifiers:{number:!0}}],staticClass:"box-border text-center shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",attrs:{id:"kv-input-"+t.uuid},domProps:{value:t.kV},on:{input:function(e){e.target.composing||(t.kV=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"flex flex-col items-center"},[a("label",{staticClass:"mb-1 ml-1",attrs:{for:"kA-input-"+t.uuid}},[t._v("kA")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.kA,expression:"kA",modifiers:{number:!0}}],staticClass:"box-border text-center shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",attrs:{id:"ka-input-"+t.uuid},domProps:{value:t.kA},on:{input:function(e){e.target.composing||(t.kA=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"flex flex-col items-center"},[a("label",{staticClass:"mb-1 ml-1",attrs:{for:"kS-input-"+t.uuid}},[t._v("kS")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.kS,expression:"kS",modifiers:{number:!0}}],staticClass:"box-border text-center shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",attrs:{id:"ks-input-"+t.uuid},domProps:{value:t.kS},on:{input:function(e){e.target.composing||(t.kS=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"col-start-2 flex justify-center"},[a("button",{staticClass:"mt-3 bg-white hover:bg-gray-100 text-gray-800 font-semibold py-2 px-4 border border-gray-400 rounded outline-none focus:shadow-outline",on:{click:t.reset}},[t._v("\n        Reset\n      ")])])])])}),[],!1,null,null,null);e.default=n.exports}}]);